<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–î–µ–º–æ ‚Äî —ç–ª–µ–º–µ–Ω—Ç "1" (a) ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ live CSS</title>
  <style>
    :root{
      --bg: #f6f8fb;
      --card: #ffffff;
      --accent: #0b63ff;
      --muted: #6b7280;
      --radius: 10px;
      --gap: 12px;
    }

    html,body{height:100%;margin:0;font-family:Inter, Roboto, Arial, sans-serif;background:var(--bg);color:#111827;}
    .container{max-width:1100px;margin:20px auto;padding:18px;}
    h1{font-size:18px;margin:0 0 12px 0;}
    .intro{color:var(--muted);margin-bottom:18px;font-size:14px;}

    /* –ü–∞–Ω–µ–ª—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ */
    .demo-wrap{
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:18px;
      align-items:start;
    }

    .panel{
      background:var(--card);
      border-radius:var(--radius);
      padding:14px;
      box-shadow:0 6px 20px rgba(12,18,36,0.04);
    }

    /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Å—ã–ª–æ–∫ */
    .variants{display:flex;flex-direction:column;gap:12px;}
    .variant-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;padding:8px;border-radius:8px;border:1px dashed rgba(15,23,42,0.04);background:linear-gradient(180deg,#fff, #fbfdff);}
    .variant-row p{margin:0;font-size:13px;color:#374151;}
    .variant-row small{color:var(--muted);font-size:12px;margin-left:6px;}

    .link-sample{font-weight:600;text-decoration:underline;cursor:pointer;}
    .link-button-like{display:inline-block;padding:8px 12px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);text-decoration:none;}
    .link-block{display:block;padding:8px;border-radius:6px;border:1px solid rgba(0,0,0,0.04);text-decoration:none;}
    .muted{color:var(--muted);font-size:13px}
    .row-title{font-weight:700;color:#0f172a;font-size:13px;margin-bottom:8px}

    /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî –ø–æ–ª–µ –¥–ª—è CSS –∏ —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π */
    .controls{display:flex;flex-direction:column;gap:10px;}
    textarea#css-input{width:100%;min-height:220px;padding:10px;border:1px solid #e6e9ee;border-radius:8px;font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:13px;resize:vertical;background:#fafbff;}
    .controls .buttons{display:flex;gap:8px;align-items:center;}
    button{padding:8px 10px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer;font-weight:600;}
    button.secondary{background:#fff;color:var(--accent);border:1px solid #e6e9ee;}
    .info{font-size:13px;color:var(--muted);}

    /* –¢–∞–±–ª–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤ */
    .table-wrap{max-height:320px;overflow:auto;border-radius:8px;border:1px solid #eef2ff;background:#fff;}
    table{border-collapse:collapse;width:100%;min-width:320px;}
    th,td{padding:8px 10px;border-bottom:1px solid #f1f5f9;text-align:left;font-size:13px;}
    th{background:#fbfdff;font-weight:700;position:sticky;top:0;}
    td.prop{width:40%;}
    td.value{white-space:pre-wrap;font-family:Menlo,monospace;}

    /* –ù–µ–±–æ–ª—å—à–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è */
    .hint{font-size:13px;color:var(--muted);margin-top:8px}

    @media (max-width:980px){
      .demo-wrap{grid-template-columns:1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ "1" ‚Äî &lt;a&gt; (—Å—Å—ã–ª–∫–∏) ‚Äî —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –∏ live-—Ä–µ–¥–∞–∫—Ç–æ—Ä CSS</h1>
    <div class="intro">
      –ù–∞ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–µ–≥–∞ <code>&lt;a&gt;</code>. –ù–∞ –ø—Ä–∞–≤–æ–π ‚Äî –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Å—Ç–∏–ª–µ–π (–∫–∞–∫ –≤ CSS-—Ñ–∞–π–ª–µ).
      –ù–∞–∂–º–∏—Ç–µ <strong>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</strong>, —á—Ç–æ–±—ã —Å—Ç–∏–ª–∏ –≤—Å—Ç—É–ø–∏–ª–∏ –≤ –¥–µ–π—Å—Ç–≤–∏–µ. –ü–æ–¥ –ø–æ–ª–µ–º ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –ø–∞—Ä "—Å–≤–æ–π—Å—Ç–≤–æ / –∑–Ω–∞—á–µ–Ω–∏–µ", –∏–∑–≤–ª–µ—á—ë–Ω–Ω–∞—è –∏–∑ –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ <code>a</code> –≤–Ω—É—Ç—Ä–∏ –¥–µ–º–æ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).
    </div>

    <div class="demo-wrap">
      <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨: –í–ê–†–ò–ê–ù–¢–´ -->
      <section class="panel" id="demo">
        <div class="row-title">–í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è &lt;a&gt; (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ #demo)</div>

        <div class="variants">
          <div class="variant-row">
            <p>1) –û–±—ã—á–Ω–∞—è —Å—Å—ã–ª–∫–∞: <a class="link-sample" href="index2.html">–û–±—ã—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ (index2.html)</a></p>
          </div>

          <div class="variant-row">
            <p>2) –°—Å—ã–ª–∫–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º <code>target="_blank"</code>: <a class="link-sample" href="https://example.com" target="_blank" rel="noopener noreferrer">–û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</a></p>
            <small class="muted">rel="noopener noreferrer" –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</small>
          </div>

          <div class="variant-row">
            <p>3) –°—Å—ã–ª–∫–∞ mailto: <a class="link-sample" href="mailto:info@example.com">–ù–∞–ø–∏—Å–∞—Ç—å –ø–∏—Å—å–º–æ</a></p>
          </div>

          <div class="variant-row">
            <p>4) –°—Å—ã–ª–∫–∞-–∑–∞–∫–ª–∞–¥–∫–∞ (hash): <a class="link-sample" href="#anchor">–ü–µ—Ä–µ—Ö–æ–¥ –∫ —è–∫–æ—Ä—é (–≤–Ω–∏–∑—É)</a></p>
          </div>

          <div class="variant-row">
            <p>5) –°—Å—ã–ª–∫–∞-–∏–∫–æ–Ω–∫–∞ (–≤–Ω–µ—à–Ω—è—è): <a class="link-sample" href="https://example.com" aria-label="–í–Ω–µ—à–Ω—è—è —Å—Å—ã–ª–∫–∞">üåê –í–Ω–µ—à–Ω—è—è</a></p>
          </div>

          <div class="variant-row">
            <p>6) –°—Å—ã–ª–∫–∞ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞: <a class="link-button-like" href="index2.html">–ö–Ω–æ–ø–∫–∞-—Å—Å—ã–ª–∫–∞</a></p>
          </div>

          <div class="variant-row">
            <p>7) –ë–ª–æ—á–Ω–∞—è —Å—Å—ã–ª–∫–∞: <a class="link-block" href="index2.html">–ë–ª–æ—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ (display:block)</a></p>
          </div>

          <div class="variant-row">
            <p>8) –°—Å—ã–ª–∫–∞ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞: <p style="margin:0">–ü–∞—Ä–∞–≥—Ä–∞—Ñ —Å <a class="link-sample" href="index2.html">–≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–æ–π</a> –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞.</p></p>
          </div>

          <div class="variant-row">
            <p>9) –°—Å—ã–ª–∫–∞ –≤ —Å–ø–∏—Å–∫–µ: <ul style="margin:0;padding-left:18px;"><li><a href="index2.html">–ü—É–Ω–∫—Ç —Å–ø–∏—Å–∫–∞ ‚Äî —Å—Å—ã–ª–∫–∞</a></li></ul></p>
          </div>

          <div class="variant-row">
            <p>10) –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ (aria-disabled): <a class="link-sample" href="#" aria-disabled="true" onclick="return false;">aria-disabled="true"</a></p>
          </div>

          <div class="variant-row">
            <p>11) –°—Å—ã–ª–∫–∞ —Å —Ä–æ–ª—å—é –∫–Ω–æ–ø–∫–∏: <a class="link-button-like" href="#" role="button" onclick="alert('role=button clicked'); return false;">role="button"</a></p>
          </div>

          <div class="variant-row">
            <p>12) –°—Å—ã–ª–∫–∞ —Å tabindex: <a class="link-sample" href="index2.html" tabindex="0">tabindex="0"</a></p>
          </div>

          <div class="variant-row">
            <p>13) –°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (download): <a class="link-sample" href="#" download="sample.txt">–°–∫–∞—á–∞—Ç—å (–∞—Ç—Ä–∏–±—É—Ç download)</a></p>
          </div>

          <div class="variant-row">
            <p>14) –°—Å—ã–ª–∫–∞ —Å rel="nofollow": <a class="link-sample" href="https://external.example" rel="nofollow">rel="nofollow"</a></p>
          </div>

          <div class="variant-row">
            <p>15) –ê–∫—Ç–∏–≤–Ω–∞—è / hover —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Äî –Ω–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –ª—é–±—ã–º –ø—Ä–∏–º–µ—Ä–∞–º –≤—ã—à–µ.</p>
          </div>

          <div class="variant-row" id="anchor" style="border-style:solid;border-color:transparent;">
            <p class="muted">–Ø–∫–æ—Ä—å (–Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ hash-—Å—Å—ã–ª–∫–∏): —ç—Ç–æ –º–µ—Å—Ç–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —è–∫–æ—Ä—è.</p>
          </div>
        </div>
      </section>

      <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨: CSS INPUT + –¢–ê–ë–õ–ò–¶–ê -->
      <aside class="panel">
        <div class="row-title">Live CSS (–≤–≤–æ–¥ —Å—Ç–∏–ª–µ–π –∫–∞–∫ –≤ .css)</div>

        <div class="controls">
          <label class="info">–í–≤–µ–¥–∏—Ç–µ CSS. –ü—Ä–∞–≤–∏–ª–∞ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É <code>#demo</code>. –ü—Ä–∏–º–µ—Ä:
<pre style="background:#f6f9ff;padding:8px;border-radius:6px;margin:6px 0;font-family:Menlo,monospace;font-size:12px;">
a { color: crimson; text-decoration: none; }
a:hover { text-decoration: underline; color: darkred; }
.link-button-like { background: #0b63ff; color: #fff; }
</pre>
          </label>

          <textarea id="css-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ CSS –∑–¥–µ—Å—å...">/* –ü—Ä–∏–º–µ—Ä —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ */
a { color: #0b63ff; text-decoration: underline; }
a:hover { color: #063bb5; text-decoration: none; }
.link-button-like { background: #e6f0ff; color: #0b63ff; border:1px solid rgba(11,99,255,0.12); }
.link-block { border-color: rgba(11,99,255,0.06); }</textarea>

          <div class="buttons">
            <button id="apply-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <button id="reset-btn" class="secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
            <button id="export-btn" class="secondary">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å CSS</button>
          </div>

          <div class="hint">–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è <strong>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</strong> —Ç–∞–±–ª–∏—Ü–∞ –Ω–∏–∂–µ –ø–æ–∫–∞–∂–µ—Ç –ø–∞—Ä—ã "—Å–≤–æ–π—Å—Ç–≤–æ: –∑–Ω–∞—á–µ–Ω–∏–µ" –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, –æ—Ç–Ω–æ—Å—è—â–∏—Ö—Å—è –∫ —Ç–µ–≥—É <code>a</code> –≤–Ω—É—Ç—Ä–∏ <code>#demo</code> (–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–∏–¥–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤).</div>

          <div style="margin-top:10px;font-weight:700">–¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ <code>a</code> –≤–Ω—É—Ç—Ä–∏ <code>#demo</code> (–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∞–≤–∏–ª)</div>
          <div class="table-wrap" id="table-wrap">
            <table id="props-table" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Å–≤–æ–π—Å—Ç–≤">
              <thead>
                <tr><th>–°–≤–æ–π—Å—Ç–≤–æ</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
              </thead>
              <tbody>
                <!-- –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è JS -->
              </tbody>
            </table>
          </div>

          <div class="hint" style="margin-top:8px">–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å / –ø—Ä–∞–≤–∏—Ç—å CSS –≤ –ø–æ–ª–µ —Å–ª–µ–≤–∞. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—ã –≤ —Ç–∞–±–ª–∏—Ü—É (—á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É").</div>

          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="add-row" class="secondary">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É</button>
            <button id="clear-table" class="secondary">–û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      // –≠–ª–µ–º–µ–Ω—Ç—ã
      const cssInput = document.getElementById('css-input');
      const applyBtn = document.getElementById('apply-btn');
      const resetBtn = document.getElementById('reset-btn');
      const exportBtn = document.getElementById('export-btn');
      const propsTableBody = document.querySelector('#props-table tbody');
      const addRowBtn = document.getElementById('add-row');
      const clearTableBtn = document.getElementById('clear-table');

      // –°—Ç–∞—Ä—Ç–æ–≤—ã–π CSS (—Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ textarea –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
      const defaultCSS = cssInput.value;

      // –°–æ–∑–¥–∞—ë–º <style id="user-live"> –≤ head, –∫—É–¥–∞ –±—É–¥–µ–º –≤—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–π CSS
      let styleEl = document.getElementById('user-live');
      if (!styleEl){
        styleEl = document.createElement('style');
        styleEl.id = 'user-live';
        document.head.appendChild(styleEl);
      }

      // –§—É–Ω–∫—Ü–∏—è: –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è scoping ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º "#demo " –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å–µ–ª–µ–∫—Ç–æ—Ä, –∫—Ä–æ–º–µ @rules
      function scopeCSS(cssText, scopeSelector = '#demo') {
        // –ü—Ä–æ—Å—Ç–µ–π—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –±–ª–æ–∫–∏ –ø–æ "}"
        const parts = cssText.split('}');
        const out = parts.map(part => {
          const idx = part.indexOf('{');
          if (idx === -1) return ''; // –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –±–ª–æ–∫
          const rawSelector = part.slice(0, idx).trim();
          const body = part.slice(idx + 1).trim();
          if (!rawSelector) return '';
          // –ï—Å–ª–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å @ (–Ω–∞–ø—Ä–∏–º–µ—Ä, @media), –≤–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –µ—Å—Ç—å –≤–º–µ—Å—Ç–µ —Å —Ç–µ–ª–æ–º (–≤–Ω—É—Ç—Ä–∏ media –º–æ–∂–µ—Ç –±—ã—Ç—å css ‚Äî –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
          if (rawSelector.startsWith('@')) {
            // –ü–æ–ø—ã—Ç–∫–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å @-–±–ª–æ–∫: –≤ —ç—Ç–æ–º –ø—Ä–æ—Å—Ç–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ –æ—Å—Ç–∞–≤–∏–º –±–ª–æ–∫ –∫–∞–∫ –µ—Å—Ç—å –∏ –Ω–µ –ø—Ä–µ—Ñ–∏–∫—Å—É–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã.
            return rawSelector + ' {' + body + '}'; // –≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ scoping –≤–Ω—É—Ç—Ä–∏ @
          }
          // –†–∞–∑–±–∏–≤–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –ø–æ –∑–∞–ø—è—Ç—ã–º –∏ –ø—Ä–µ—Ñ–∏–∫—Å–∏–º –∫–∞–∂–¥—ã–π
          const selectors = rawSelector.split(',').map(s => s.trim()).filter(Boolean).map(s => {
            // –ï—Å–ª–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç scopeSelector ‚Äî –Ω–µ –¥—É–±–ª–∏—Ä—É–µ–º
            if (s.startsWith(scopeSelector) || s.indexOf(scopeSelector + ' ') !== -1) return s;
            // :root –∏–ª–∏ html/body –æ—Å—Ç–∞–≤–ª—è–µ–º –Ω–µ –ø—Ä–µ—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
            if (s === ':root' || s === 'html' || s === 'body') return s;
            return scopeSelector + ' ' + s;
          });
          return selectors.join(', ') + ' {' + body + '}';
        });
        return out.join('\n');
      }

      // –§—É–Ω–∫—Ü–∏—è: –∏–∑–≤–ª–µ—á—å –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞—Ä–≥–µ—Ç—è—Ç "a" –≤–Ω—É—Ç—Ä–∏ #demo
      // –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–µ—Ä: –∏—â–µ—Ç –±–ª–æ–∫–∏, –≥–¥–µ —Å–µ–ª–µ–∫—Ç–æ—Ä (–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞) —Å–æ–¥–µ—Ä–∂–∏—Ç 'a' –∏–ª–∏ '.link' —Å 'a'
      function extractADeclarations(cssText) {
        const declarations = {}; // property -> value (–ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç)
        // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –±–ª–æ–∫–∏
        const blocks = cssText.split('}');
        blocks.forEach(block => {
          const i = block.indexOf('{');
          if (i === -1) return;
          const selRaw = block.slice(0, i).trim();
          const body = block.slice(i + 1).trim();
          if (!selRaw) return;
          // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ 'a'
          // –£–¥–∞–ª—è–µ–º scope prefix –µ—Å–ª–∏ –µ—Å—Ç—å (#demo)
          const selectors = selRaw.split(',').map(s => s.trim());
          const appliesToA = selectors.some(s => {
            const s0 = s.replace(/#demo\s*/g,'').trim();
            // –ø—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: —Å–æ–¥–µ—Ä–∂–∏—Ç 'a' –∫–∞–∫ –æ–¥–∏–Ω–æ—á–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ ' a' –∏–ª–∏ –≤–∫–ª—é—á–∞–µ—Ç 'a:' (–ø—Å–µ–≤–¥–æ—Å–æ—Å—Ç–æ—è–Ω–∏—è)
            // –ª–∏–±–æ —Å–∞–º —Å–µ–ª–µ–∫—Ç–æ—Ä —Ä–∞–≤–µ–Ω 'a' –∏–ª–∏ 'a:hover' –∏ —Ç.–¥.
            return /\b(a|a[.:#[\s>+~])/i.test(s0) || /\ba\b/.test(s0) || s0.startsWith('a') || s0.includes(' a') || s0.includes('a:') || s0.endsWith('a');
          });
          if (appliesToA) {
            // –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–ª–æ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
            const decls = body.split(';').map(d => d.trim()).filter(Boolean);
            decls.forEach(d => {
              const sep = d.indexOf(':');
              if (sep === -1) return;
              const prop = d.slice(0, sep).trim();
              const val = d.slice(sep + 1).trim();
              if (prop) declarations[prop] = val;
            });
          }
        });
        return declarations;
      }

      // –†–∏—Å—É–µ–º —Ç–∞–±–ª–∏—Ü—É –ø–æ –æ–±—ä–µ–∫—Ç—É declarations
      function renderTable(decls) {
        propsTableBody.innerHTML = '';
        const keys = Object.keys(decls);
        if (keys.length === 0) {
          propsTableBody.innerHTML = '<tr><td class="prop" style="color:var(--muted)">‚Äî –Ω–µ—Ç —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ a ‚Äî</td><td class="value"></td></tr>';
          return;
        }
        keys.forEach(k => {
          const tr = document.createElement('tr');
          const tdProp = document.createElement('td');
          tdProp.className = 'prop';
          tdProp.textContent = k;
          const tdVal = document.createElement('td');
          tdVal.className = 'value';
          tdVal.textContent = decls[k];
          tr.appendChild(tdProp);
          tr.appendChild(tdVal);
          propsTableBody.appendChild(tr);
        });
      }

      // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏: scope + –≤—Å—Ç–∞–≤–∏—Ç—å –≤ styleEl, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
      function applyStyles() {
        const raw = cssInput.value || '';
        const scoped = scopeCSS(raw, '#demo');
        styleEl.textContent = '/* scoped styles for #demo */\n' + scoped;
        // –∏–∑–≤–ª–µ–∫–∞–µ–º –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –¥–ª—è a
        const decls = extractADeclarations(scoped);
        renderTable(decls);
      }

      // Reset
      function resetStyles() {
        cssInput.value = defaultCSS;
        applyStyles();
      }

      // –≠–∫—Å–ø–æ—Ä—Ç (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å CSS –≤ –±—É—Ñ–µ—Ä)
      async function exportCSS() {
        const text = cssInput.value;
        try {
          await navigator.clipboard.writeText(text);
          exportBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ';
          setTimeout(()=> exportBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å CSS', 1200);
        } catch (e) {
          // fallback
          const t = document.createElement('textarea'); t.value = text; document.body.appendChild(t); t.select();
          try { document.execCommand('copy'); alert('CSS —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'); } catch (err) { alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏'); }
          document.body.removeChild(t);
        }
      }

      // –î–æ–±–∞–≤–∏—Ç—å –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É –≤—Ä—É—á–Ω—É—é (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø—Ä–∞–≤–∫–∞)
      function addRowManual() {
        const tr = document.createElement('tr');
        const tdProp = document.createElement('td'); tdProp.className='prop';
        const inpProp = document.createElement('input'); inpProp.type='text'; inpProp.placeholder='property'; inpProp.style.width='100%'; inpProp.style.border='0';
        tdProp.appendChild(inpProp);
        const tdVal = document.createElement('td'); tdVal.className='value';
        const inpVal = document.createElement('input'); inpVal.type='text'; inpVal.placeholder='value'; inpVal.style.width='100%'; inpVal.style.border='0';
        tdVal.appendChild(inpVal);
        tr.appendChild(tdProp); tr.appendChild(tdVal);
        propsTableBody.appendChild(tr);
      }

      function clearTable() {
        propsTableBody.innerHTML = '';
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏
      applyStyles();

      // –°–æ–±—ã—Ç–∏—è
      applyBtn.addEventListener('click', applyStyles);
      resetBtn.addEventListener('click', resetStyles);
      exportBtn.addEventListener('click', exportCSS);
      addRowBtn.addEventListener('click', addRowManual);
      clearTableBtn.addEventListener('click', clearTable);

      // ENTER –≤ textarea —Å Ctrl+Enter –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å—Ç–∏–ª–∏
      cssInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          applyStyles();
        }
      });

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      cssInput.addEventListener('blur', () => {
        // –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏, –Ω–æ –º–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –¥–ª—è –ø—Ä–µ–≤—å—é:
        // applyStyles();
      });

    })();
  </script>
</body>
</html>
