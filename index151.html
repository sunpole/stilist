<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–∏–π –ú–∞–≥–Ω–∞—Ç</title>
    <style>
        /* === –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –°–¢–ê–†–´–• –ë–†–ê–£–ó–ï–†–û–í === */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: Arial, sans-serif;
            background: #2c3e50;
            color: #ecf0f1;
            line-height: 1.4;
            overflow-x: hidden;
            padding: 0;
            margin: 0;
        }

        /* === –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –®–ê–ü–ö–ê –° –†–ï–°–£–†–°–ê–ú–ò === */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #34495e;
            padding: 8px 5px;
            z-index: 1000;
            border-bottom: 2px solid #e67e22;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            font-size: 12px;
        }

        .resource-item {
            text-align: center;
            padding: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }

        /* === –ü–ê–ù–ï–õ–¨ –ö–ù–û–ü–û–ö === */
        .controls {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: #2c3e50;
            padding: 8px 5px;
            z-index: 999;
            display: flex;
            overflow-x: auto;
            gap: 5px;
            border-bottom: 1px solid #34495e;
        }

        .control-btn {
            flex: 0 0 auto;
            padding: 8px 12px;
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
        }

        /* === –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ === */
        .main-content {
            margin-top: 120px;
            padding: 10px 5px 70px;
            max-width: 100%;
        }

        /* === –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–ê–Ø –õ–ò–ù–ò–Ø === */
        .production-line {
            display: flex;
            overflow-x: auto;
            gap: 5px;
            margin-bottom: 15px;
            padding: 10px 5px;
            background: rgba(52, 73, 94, 0.5);
            border-radius: 8px;
        }

        .production-stage {
            flex: 0 0 auto;
            width: 80px;
            padding: 8px;
            background: #34495e;
            border-radius: 6px;
            text-align: center;
            border: 2px solid transparent;
        }

        .stage-active {
            border-color: #e67e22;
            background: #3d566e;
        }

        .stage-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .stage-name {
            font-size: 10px;
            margin-bottom: 5px;
            height: 24px;
            overflow: hidden;
        }

        .employee-slot {
            width: 24px;
            height: 24px;
            margin: 0 auto;
            border: 1px dashed #7f8c8d;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .has-employee {
            border-color: #27ae60;
            background: rgba(39, 174, 96, 0.2);
        }

        /* === –°–ü–ò–°–û–ö –ó–ê–ö–ê–ó–û–í === */
        .orders-section {
            background: rgba(52, 73, 94, 0.5);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .order-item {
            padding: 8px;
            background: #34495e;
            border-radius: 6px;
            border-left: 3px solid #e67e22;
        }

        .order-selected {
            background: #3d566e;
            border-left-color: #f39c12;
        }

        /* === –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê === */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            padding: 20px 10px;
            overflow-y: auto;
        }

        .modal-content {
            background: #34495e;
            border-radius: 10px;
            padding: 15px;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 20px;
            cursor: pointer;
        }

        /* === –ö–ê–†–¢–ê –†–ï–ö–õ–ê–ú–´ === */
        .ad-map {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(4, 60px);
            gap: 5px;
            margin: 15px 0;
            position: relative;
        }

        .map-street {
            background: #7f8c8d;
            position: absolute;
        }

        .map-building {
            background: #2c3e50;
            position: absolute;
            border: 1px solid #34495e;
        }

        .ad-point {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #e74c3c;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
        }

        .ad-point.active {
            background: #27ae60;
        }

        .metro {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #2980b9;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 5;
        }

        /* === –¢–ê–ë–õ–ò–¶–ê –†–ï–ö–õ–ê–ú–´ === */
        .ad-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 12px;
        }

        .ad-table th, .ad-table td {
            border: 1px solid #7f8c8d;
            padding: 6px;
            text-align: center;
        }

        .ad-table th {
            background: #2c3e50;
        }

        /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
        @media (min-width: 768px) {
            .header {
                grid-template-columns: repeat(6, 1fr);
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .controls {
                top: 80px;
                padding: 10px 15px;
            }
            
            .main-content {
                margin-top: 140px;
                padding: 15px 15px 80px;
            }
            
            .production-stage {
                width: 100px;
                padding: 12px;
            }
            
            .stage-name {
                font-size: 11px;
            }
        }

        @media (max-width: 320px) {
            .control-btn {
                padding: 6px 8px;
                font-size: 10px;
            }
            
            .production-stage {
                width: 70px;
            }
            
            .stage-name {
                font-size: 9px;
            }
        }

        /* === –£–õ–£–ß–®–ï–ù–ò–Ø –î–õ–Ø –°–¢–ê–†–´–• ANDROID === */
        .production-line::-webkit-scrollbar {
            height: 4px;
        }

        .production-line::-webkit-scrollbar-thumb {
            background: #e67e22;
            border-radius: 2px;
        }

        /* === –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô === */
        .notification {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #e67e22;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            z-index: 3000;
            display: none;
        }
    </style>
</head>
<body>
    <!-- –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –®–ê–ü–ö–ê –° –†–ï–°–£–†–°–ê–ú–ò -->
    <div class="header">
        <div class="resource-item">
            <div>‚≠ê RATING</div>
            <div id="rating">1</div>
        </div>
        <div class="resource-item">
            <div>üí∞ BYN</div>
            <div id="money">2,000</div>
        </div>
        <div class="resource-item">
            <div>üèÉ DRIVE</div>
            <div id="drive">80/80</div>
        </div>
        <div class="resource-item">
            <div>üî• ZEAL</div>
            <div id="zeal">0</div>
        </div>
        <div class="resource-item">
            <div>üí§ REST</div>
            <div id="rest">100</div>
        </div>
        <div class="resource-item">
            <div>üë• –°–û–¢–†–£–î–ù–ò–ö–ò</div>
            <div id="employees">0/1</div>
        </div>
    </div>

    <!-- –ü–ê–ù–ï–õ–¨ –ö–ù–û–ü–û–ö –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
    <div class="controls">
        <button class="control-btn" onclick="game.nextDay()">üìÖ –°–ª–µ–¥. –¥–µ–Ω—å</button>
        <button class="control-btn" onclick="game.toggleAutoDay()">‚ö° –ê–≤—Ç–æ-–¥–µ–Ω—å: –í–´–ö–õ</button>
        <button class="control-btn" onclick="game.activateZeal()">üöÄ ZEAL</button>
        <button class="control-btn" onclick="game.corporateEvent()">üéâ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤</button>
        <button class="control-btn" onclick="game.showModal('employees-modal')">üë• –ü–µ—Ä—Å–æ–Ω–∞–ª</button>
        <button class="control-btn" onclick="game.showModal('upgrades-modal')">üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è</button>
        <button class="control-btn" onclick="game.showModal('advertising-modal')">üì¢ –†–µ–∫–ª–∞–º–∞</button>
        <button class="control-btn" onclick="game.showModal('orders-modal')">üì¶ –ó–∞–∫–∞–∑—ã</button>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <div class="main-content">
        <!-- –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–ê–Ø –õ–ò–ù–ò–Ø -->
        <div class="production-line" id="production-line">
            <!-- –≠—Ç–∞–ø—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <!-- –¢–ï–ö–£–©–ò–ô –ó–ê–ö–ê–ó -->
        <div class="orders-section">
            <h3 style="margin-bottom: 10px; text-align: center;">üìä –¢–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑</h3>
            <div id="current-order-info">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞</div>
            <div style="background: #2c3e50; height: 6px; border-radius: 3px; margin-top: 8px; overflow: hidden;">
                <div id="order-progress" style="height: 100%; background: #e67e22; width: 0%; transition: width 0.3s;"></div>
            </div>
        </div>

        <!-- –î–û–°–¢–£–ü–ù–´–ï –ó–ê–ö–ê–ó–´ -->
        <div class="orders-section">
            <h3 style="margin-bottom: 10px; text-align: center;">üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã</h3>
            <div class="orders-list" id="available-orders">
                <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–ï–†–°–û–ù–ê–õ–ê -->
    <div id="employees-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="game.hideModal('employees-modal')">√ó</button>
            <h2 style="margin-bottom: 15px; text-align: center;">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</h2>
            
            <div style="background: #2c3e50; padding: 10px; border-radius: 6px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>–ë–∞–∑–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫:</span>
                    <span>1,500 BYN/–º–µ—Å</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>–ë—É—Ö–≥–∞–ª—Ç–µ—Ä:</span>
                    <span>2,000 BYN/–º–µ—Å</span>
                </div>
            </div>

            <button class="control-btn" onclick="game.hireEmployee()" style="width: 100%; margin-bottom: 10px;">
                üë∑ –ù–∞–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            </button>
            <button class="control-btn" onclick="game.hireAccountant()" style="width: 100%; background: #9b59b6;">
                üßÆ –ù–∞–Ω—è—Ç—å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
            </button>

            <div style="margin-top: 15px;">
                <h4>–¢–µ–∫—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞:</h4>
                <div id="employees-list" style="margin-top: 10px;">
                    <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –†–ï–ö–õ–ê–ú–´ -->
    <div id="advertising-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="game.hideModal('advertising-modal')">√ó</button>
            <h2 style="margin-bottom: 15px; text-align: center;">üì¢ –†–µ–∫–ª–∞–º–Ω–∞—è –∫–∞—Ä—Ç–∞</h2>
            
            <!-- –£–ü–†–û–©–ï–ù–ù–ê–Ø –ö–ê–†–¢–ê -->
            <div class="ad-map">
                <!-- –ú–µ—Ç—Ä–æ -->
                <div class="metro" style="top: 10px; left: 10px;">–ú</div>
                
                <!-- –†–µ–∫–ª–∞–º–Ω—ã–µ —Ç–æ—á–∫–∏ -->
                <div class="ad-point" style="top: 15px; left: 50px;" data-point="1">1</div>
                <div class="ad-point" style="top: 15px; left: 100px;" data-point="2">2</div>
                <div class="ad-point" style="top: 50px; left: 30px;" data-point="3">3</div>
                <div class="ad-point" style="top: 50px; left: 80px;" data-point="4">4</div>
                <div class="ad-point" style="top: 50px; left: 130px;" data-point="5">5</div>
                <div class="ad-point" style="top: 85px; left: 20px;" data-point="6">6</div>
                <div class="ad-point" style="top: 85px; left: 70px;" data-point="7">7</div>
                <div class="ad-point" style="top: 85px; left: 120px;" data-point="8">8</div>
                <div class="ad-point" style="top: 120px; left: 40px;" data-point="9">9</div>
                <div class="ad-point" style="top: 120px; left: 90px;" data-point="10">10</div>
                
                <!-- –£–ª–∏—Ü—ã -->
                <div class="map-street" style="top: 25px; left: 45px; width: 120px; height: 4px;"></div>
                <div class="map-street" style="top: 60px; left: 25px; width: 120px; height: 4px;"></div>
                <div class="map-street" style="top: 95px; left: 15px; width: 130px; height: 4px;"></div>
                <div class="map-street" style="top: 130px; left: 35px; width: 70px; height: 4px;"></div>
                
                <!-- –ó–¥–∞–Ω–∏—è -->
                <div class="map-building" style="top: 5px; left: 70px; width: 40px; height: 35px;"></div>
                <div class="map-building" style="top: 40px; left: 5px; width: 50px; height: 35px;"></div>
            </div>

            <!-- –¢–ê–ë–õ–ò–¶–ê –†–ï–ö–õ–ê–ú–´ -->
            <table class="ad-table">
                <thead>
                    <tr>
                        <th>–¢–æ—á–∫–∞</th>
                        <th>–°—Ç–æ–∏–º–æ—Å—Ç—å/–¥–µ–Ω—å</th>
                        <th>–ü–æ–∫–∞–∑–æ–≤/–¥–µ–Ω—å</th>
                        <th>CTR</th>
                        <th>–ë–æ–Ω—É—Å BYN</th>
                    </tr>
                </thead>
                <tbody id="ad-table-body">
                    <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </tbody>
            </table>

            <div style="text-align: center; margin-top: 15px; padding: 10px; background: #2c3e50; border-radius: 6px;">
                <div>–ë–æ–Ω—É—Å –∑–∞ –≤—Å–µ —Ç–æ—á–∫–∏: <strong id="total-bonus">0%</strong></div>
                <div>–û–±—â–∏–π CTR: <strong id="total-ctr">0%</strong></div>
            </div>
        </div>
    </div>

    <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div class="notification" id="notification"></div>

    <script>
        // === –û–°–ù–û–í–ù–û–ô –û–ë–™–ï–ö–¢ –ò–ì–†–´ ===
        const game = {
            // –ò–ì–†–û–í–´–ï –î–ê–ù–ù–´–ï
            state: {
                money: 2000,
                rating: 1,
                drive: 80,
                maxDrive: 80,
                zeal: 0,
                rest: 100,
                currentDay: 1,
                employees: [],
                accountant: false,
                currentOrder: null,
                orderProgress: 0,
                activeAdPoints: [],
                autoDay: false,
                autoInterval: null
            },

            // –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–ï –≠–¢–ê–ü–´
            productionStages: [
                { name: 'ORDER', icon: 'üìã', cost: 1, output: 'ORDER' },
                { name: 'LAYOUT', icon: 'üé®', cost: 1, output: 'LAYOUT' },
                { name: 'PREPRESS', icon: 'üñ®Ô∏è', cost: 1, output: 'PREPRESS' },
                { name: 'PRESS', icon: 'üì†', cost: 1, output: 'PRESS' },
                { name: 'POST_PRESS', icon: '‚úÇÔ∏è', cost: 1, output: 'POST_PRESS' },
                { name: 'PRODUCT', icon: 'üì¶', cost: 1, output: 'PRODUCT' },
                { name: 'SHIPMENT', icon: 'üöö', cost: 1, output: 'SHIPMENT' }
            ],

            // –î–ê–ù–ù–´–ï –†–ï–ö–õ–ê–ú–´
            adPoints: [
                { cost: 40500, views: 15000, ctr: 7, bonus: 0.50 },
                { cost: 27000, views: 12000, ctr: 5, bonus: 0.45 },
                { cost: 18000, views: 10000, ctr: 4.5, bonus: 0.40 },
                { cost: 12000, views: 8500, ctr: 4, bonus: 0.35 },
                { cost: 8000, views: 7000, ctr: 3.5, bonus: 0.30 },
                { cost: 5300, views: 5500, ctr: 3, bonus: 0.25 },
                { cost: 3500, views: 4000, ctr: 2.5, bonus: 0.20 },
                { cost: 2300, views: 2800, ctr: 2, bonus: 0.15 },
                { cost: 1500, views: 1800, ctr: 1.5, bonus: 0.10 },
                { cost: 1000, views: 1000, ctr: 1, bonus: 0.05 }
            ],

            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
            init() {
                this.loadGame();
                this.createProductionLine();
                this.updateAdTable();
                this.generateOrders();
                this.updateUI();
                
                if (this.state.autoDay) {
                    this.toggleAutoDay();
                }
            },

            // –°–û–ó–î–ê–ù–ò–ï –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–û–ô –õ–ò–ù–ò–ò
            createProductionLine() {
                const container = document.getElementById('production-line');
                container.innerHTML = '';
                
                this.productionStages.forEach((stage, index) => {
                    const stageElement = document.createElement('div');
                    stageElement.className = 'production-stage';
                    stageElement.innerHTML = `
                        <div class="stage-icon">${stage.icon}</div>
                        <div class="stage-name">${stage.name}</div>
                        <div class="employee-slot">+</div>
                    `;
                    stageElement.onclick = () => this.processStage(index);
                    container.appendChild(stageElement);
                });
            },

            // –û–ë–†–ê–ë–û–¢–ö–ê –≠–¢–ê–ü–ê –ü–†–û–ò–ó–í–û–î–°–¢–í–ê
            processStage(stageIndex) {
                if (this.state.drive < 1) {
                    this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ DRIVE!');
                    return;
                }
                
                if (!this.state.currentOrder) {
                    this.showNotification('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑!');
                    return;
                }
                
                this.state.drive -= 1;
                this.state.orderProgress += (100 / this.productionStages.length);
                
                if (this.state.orderProgress >= 100) {
                    this.completeOrder();
                }
                
                this.updateUI();
                this.showNotification(`–í—ã–ø–æ–ª–Ω–µ–Ω —ç—Ç–∞–ø: ${this.productionStages[stageIndex].name}`);
            },

            // –ó–ê–í–ï–†–®–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê
            completeOrder() {
                if (!this.state.currentOrder) return;
                
                const reward = this.state.currentOrder.reward;
                this.state.money += reward;
                this.state.rating += this.calculateRating();
                
                this.showNotification(`‚úÖ –ó–∞–∫–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω! +${reward} BYN`);
                this.state.currentOrder = null;
                this.state.orderProgress = 0;
                this.generateOrders();
            },

            // –í–´–ë–û–† –ó–ê–ö–ê–ó–ê
            selectOrder(order) {
                if (this.state.currentOrder) {
                    this.showNotification('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑!');
                    return;
                }
                
                this.state.currentOrder = order;
                this.state.orderProgress = 0;
                this.updateUI();
                this.showNotification(`–í—ã–±—Ä–∞–Ω –∑–∞–∫–∞–∑ –∑–∞ ${order.reward} BYN`);
            },

            // –ì–ï–ù–ï–†–ê–¶–ò–Ø –ó–ê–ö–ê–ó–û–í
            generateOrders() {
                const orders = [];
                const minOrder = this.getMinOrder();
                const maxOrder = this.getMaxOrder();
                
                for (let i = 0; i < 3; i++) {
                    const reward = Math.floor(Math.random() * (maxOrder - minOrder + 1)) + minOrder;
                    orders.push({
                        id: Date.now() + i,
                        reward: reward,
                        duration: Math.max(1, Math.floor(this.productionStages.length / Math.max(1, this.state.employees.length)))
                    });
                }
                
                this.availableOrders = orders;
                this.updateOrdersList();
            },

            // –†–ê–°–ß–ï–¢ –ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ì–û –ó–ê–ö–ê–ó–ê
            getMinOrder() {
                const rating = this.state.rating;
                if (rating >= 5000) return 5000;
                if (rating >= 4000) return 2000;
                if (rating >= 3500) return 1500;
                if (rating >= 3000) return 1000;
                if (rating >= 2500) return 750;
                if (rating >= 2000) return 500;
                if (rating >= 1750) return 300;
                if (rating >= 1500) return 250;
                if (rating >= 1250) return 200;
                if (rating >= 1000) return 150;
                if (rating >= 500) return 125;
                if (rating >= 250) return 100;
                if (rating >= 100) return 75;
                return 50;
            },

            // –†–ê–°–ß–ï–¢ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ì–û –ó–ê–ö–ê–ó–ê
            getMaxOrder() {
                const rating = this.state.rating;
                if (rating >= 5000) return 250000;
                if (rating >= 4000) return 60000;
                if (rating >= 3500) return 37500;
                if (rating >= 3000) return 20000;
                if (rating >= 2500) return 15000;
                if (rating >= 2000) return 10000;
                if (rating >= 1750) return 6000;
                if (rating >= 1500) return 5000;
                if (rating >= 1250) return 4000;
                if (rating >= 1000) return 3000;
                if (rating >= 500) return 2500;
                if (rating >= 250) return 2000;
                if (rating >= 100) return 1500;
                return 1000;
            },

            // –†–ê–°–ß–ï–¢ –†–ï–ô–¢–ò–ù–ì–ê
            calculateRating() {
                const base = 1;
                const bonus = this.state.currentOrder.reward > 1000 ? 1 : 0;
                const restMultiplier = this.state.rest / 10;
                return Math.floor((base + bonus) * restMultiplier);
            },

            // –°–õ–ï–î–£–Æ–©–ò–ô –î–ï–ù–¨
            nextDay() {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
                this.autoProcessStages();
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ DRIVE
                this.state.drive = this.state.maxDrive;
                
                // –í—ã–ø–ª–∞—Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç
                this.paySalaries();
                
                // –°–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Ä–µ–∫–ª–∞–º—É
                this.payAdCosts();
                
                this.state.currentDay++;
                this.updateUI();
                this.showNotification(`üìÖ –ù–∞—Å—Ç—É–ø–∏–ª –¥–µ–Ω—å ${this.state.currentDay}`);
            },

            // –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê
            autoProcessStages() {
                if (this.state.currentOrder && this.state.employees.length > 0) {
                    const progressPerEmployee = (100 / this.productionStages.length) * this.state.employees.length;
                    this.state.orderProgress = Math.min(100, this.state.orderProgress + progressPerEmployee);
                    
                    if (this.state.orderProgress >= 100) {
                        this.completeOrder();
                    }
                }
            },

            // –í–´–ü–õ–ê–¢–ê –ó–ê–†–ü–õ–ê–¢
            paySalaries() {
                const salary = this.state.employees.length * 1500 + (this.state.accountant ? 2000 : 0);
                this.state.money -= salary;
                
                if (salary > 0) {
                    this.showNotification(`üí∏ –í—ã–ø–ª–∞—á–µ–Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç–∞: ${salary} BYN`);
                }
                
                if (this.state.money < 0) {
                    this.gameOver();
                }
            },

            // –û–ü–õ–ê–¢–ê –†–ï–ö–õ–ê–ú–´
            payAdCosts() {
                let totalCost = 0;
                this.state.activeAdPoints.forEach(pointIndex => {
                    totalCost += this.adPoints[pointIndex].cost;
                });
                
                this.state.money -= totalCost;
                
                if (totalCost > 0) {
                    this.showNotification(`üì¢ –†–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–µ–∫–ª–∞–º—É: ${totalCost} BYN`);
                }
                
                if (this.state.money < 0) {
                    this.gameOver();
                }
            },

            // –ù–ê–ô–ú –°–û–¢–†–£–î–ù–ò–ö–ê
            hireEmployee() {
                const maxEmployees = this.getMaxEmployees();
                
                if (this.state.employees.length >= maxEmployees) {
                    this.showNotification(`–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: ${maxEmployees}`);
                    return;
                }
                
                if (this.state.money < 1500) {
                    this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BYN –¥–ª—è –Ω–∞–π–º–∞!');
                    return;
                }
                
                this.state.employees.push({ type: 'basic' });
                this.state.money -= 1500;
                this.state.maxDrive += 80;
                this.updateUI();
                this.showNotification('üë∑ –ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–∞–Ω—è—Ç! +80 DRIVE/–¥–µ–Ω—å');
            },

            // –ù–ê–ô–ú –ë–£–•–ì–ê–õ–¢–ï–†–ê
            hireAccountant() {
                if (this.state.accountant) {
                    this.showNotification('–ë—É—Ö–≥–∞–ª—Ç–µ—Ä —É–∂–µ –Ω–∞–Ω—è—Ç!');
                    return;
                }
                
                if (this.state.money < 2000) {
                    this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BYN –¥–ª—è –Ω–∞–π–º–∞ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞!');
                    return;
                }
                
                this.state.accountant = true;
                this.state.money -= 2000;
                this.updateUI();
                this.showNotification('üßÆ –ë—É—Ö–≥–∞–ª—Ç–µ—Ä –Ω–∞–Ω—è—Ç!');
            },

            // –ê–ö–¢–ò–í–ê–¶–ò–Ø –†–ï–ö–õ–ê–ú–ù–û–ô –¢–û–ß–ö–ò
            toggleAdPoint(pointIndex) {
                const index = this.state.activeAdPoints.indexOf(pointIndex);
                
                if (index === -1) {
                    this.state.activeAdPoints.push(pointIndex);
                    this.showNotification(`–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ —Ä–µ–∫–ª–∞–º–Ω–∞—è —Ç–æ—á–∫–∞ ${pointIndex + 1}`);
                } else {
                    this.state.activeAdPoints.splice(index, 1);
                    this.showNotification(`–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ —Ä–µ–∫–ª–∞–º–Ω–∞—è —Ç–æ—á–∫–∞ ${pointIndex + 1}`);
                }
                
                this.updateAdTable();
            },

            // –ö–û–†–ü–û–†–ê–¢–ò–í
            corporateEvent() {
                if (this.state.money < 1000) {
                    this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BYN –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–∞!');
                    return;
                }
                
                this.state.money -= 1000;
                this.state.rest = Math.min(100, this.state.rest + 30);
                this.updateUI();
                this.showNotification('üéâ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ! REST +30');
            },

            // –ê–ö–¢–ò–í–ê–¶–ò–Ø ZEAL
            activateZeal() {
                if (this.state.zeal < 1) {
                    this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ZEAL!');
                    return;
                }
                
                const bonus = this.getLevel() * 2;
                this.state.zeal--;
                this.state.drive += bonus;
                this.updateUI();
                this.showNotification(`üöÄ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω ZEAL! +${bonus} DRIVE`);
            },

            // –ê–í–¢–û-–†–ï–ñ–ò–ú
            toggleAutoDay() {
                this.state.autoDay = !this.state.autoDay;
                
                if (this.state.autoDay) {
                    this.state.autoInterval = setInterval(() => {
                        this.nextDay();
                    }, 10000);
                    document.querySelector('[onclick="game.toggleAutoDay()"]').textContent = '‚ö° –ê–≤—Ç–æ-–¥–µ–Ω—å: –í–ö–õ';
                } else {
                    clearInterval(this.state.autoInterval);
                    document.querySelector('[onclick="game.toggleAutoDay()"]').textContent = '‚ö° –ê–≤—Ç–æ-–¥–µ–Ω—å: –í–´–ö–õ';
                }
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –£–†–û–í–ù–Ø
            getLevel() {
                const rating = this.state.rating;
                if (rating >= 5000) return 80;
                if (rating >= 4000) return 75;
                if (rating >= 3500) return 60;
                if (rating >= 3000) return 55;
                if (rating >= 2500) return 50;
                if (rating >= 2000) return 40;
                if (rating >= 1750) return 30;
                if (rating >= 1500) return 20;
                if (rating >= 1250) return 15;
                if (rating >= 1000) return 10;
                return 1;
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ì–û –ö–û–õ–ò–ß–ï–°–¢–í–ê –°–û–¢–†–£–î–ù–ò–ö–û–í
            getMaxEmployees() {
                const level = this.getLevel();
                if (level >= 80) return 400;
                if (level >= 75) return 300;
                if (level >= 60) return 180;
                if (level >= 55) return 110;
                if (level >= 50) return 100;
                if (level >= 40) return 80;
                if (level >= 30) return 30;
                if (level >= 20) return 20;
                if (level >= 15) return 15;
                if (level >= 10) return 10;
                return 1;
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê
            updateUI() {
                document.getElementById('rating').textContent = Math.floor(this.state.rating);
                document.getElementById('money').textContent = this.state.money.toLocaleString();
                document.getElementById('drive').textContent = `${this.state.drive}/${this.state.maxDrive}`;
                document.getElementById('zeal').textContent = this.state.zeal;
                document.getElementById('rest').textContent = this.state.rest;
                document.getElementById('employees').textContent = `${this.state.employees.length}/${this.getMaxEmployees()}`;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞
                const orderInfo = document.getElementById('current-order-info');
                const progressBar = document.getElementById('order-progress');
                
                if (this.state.currentOrder) {
                    orderInfo.textContent = `–ó–∞–∫–∞–∑: ${this.state.currentOrder.reward.toLocaleString()} BYN`;
                    progressBar.style.width = `${this.state.orderProgress}%`;
                } else {
                    orderInfo.textContent = '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞';
                    progressBar.style.width = '0%';
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                this.updateEmployeeSlots();
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ü–ò–°–ö–ê –ó–ê–ö–ê–ó–û–í
            updateOrdersList() {
                const container = document.getElementById('available-orders');
                container.innerHTML = '';
                
                this.availableOrders.forEach(order => {
                    const orderElement = document.createElement('div');
                    orderElement.className = 'order-item';
                    orderElement.innerHTML = `
                        <div style="display: flex; justify-content: space-between;">
                            <span>${order.reward.toLocaleString()} BYN</span>
                            <span>${order.duration} –¥–Ω.</span>
                        </div>
                    `;
                    orderElement.onclick = () => this.selectOrder(order);
                    container.appendChild(orderElement);
                });
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–õ–û–¢–û–í –°–û–¢–†–£–î–ù–ò–ö–û–í
            updateEmployeeSlots() {
                const slots = document.querySelectorAll('.employee-slot');
                slots.forEach((slot, index) => {
                    if (index < this.state.employees.length) {
                        slot.textContent = 'üë§';
                        slot.className = 'employee-slot has-employee';
                    } else {
                        slot.textContent = '+';
                        slot.className = 'employee-slot';
                    }
                });
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ê–ë–õ–ò–¶–´ –†–ï–ö–õ–ê–ú–´
            updateAdTable() {
                const tbody = document.getElementById('ad-table-body');
                tbody.innerHTML = '';
                
                let totalCTR = 0;
                let totalBonus = 0;
                
                this.adPoints.forEach((point, index) => {
                    const isActive = this.state.activeAdPoints.includes(index);
                    const row = document.createElement('tr');
                    
                    row.innerHTML = `
                        <td style="color: ${isActive ? '#27ae60' : '#e74c3c'}">${index + 1}</td>
                        <td>${point.cost.toLocaleString()}</td>
                        <td>${point.views.toLocaleString()}</td>
                        <td>${point.ctr}%</td>
                        <td>${point.bonus}</td>
                    `;
                    
                    row.onclick = () => this.toggleAdPoint(index);
                    tbody.appendChild(row);
                    
                    if (isActive) {
                        totalCTR += point.ctr;
                        totalBonus += point.bonus;
                    }
                });
                
                // –ë–æ–Ω—É—Å –∑–∞ –≤—Å–µ —Ç–æ—á–∫–∏
                if (this.state.activeAdPoints.length === 10) {
                    totalCTR = 45; // –í–º–µ—Å—Ç–æ 34%
                }
                
                document.getElementById('total-ctr').textContent = totalCTR + '%';
                document.getElementById('total-bonus').textContent = totalBonus.toFixed(2);
            },

            // –ü–û–ö–ê–ó –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
            showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            },

            // –ü–û–ö–ê–ó –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
            showModal(modalId) {
                document.getElementById(modalId).style.display = 'block';
            },

            // –°–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
            hideModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            },

            // –ö–û–ù–ï–¶ –ò–ì–†–´
            gameOver() {
                this.showNotification('üíÄ –ë–ê–ù–ö–†–û–¢–°–¢–í–û! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.');
                this.state = {
                    money: 2000,
                    rating: 1,
                    drive: 80,
                    maxDrive: 80,
                    zeal: 0,
                    rest: 100,
                    currentDay: 1,
                    employees: [],
                    accountant: false,
                    currentOrder: null,
                    orderProgress: 0,
                    activeAdPoints: [],
                    autoDay: false
                };
                this.init();
            },

            // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ì–†–´
            saveGame() {
                localStorage.setItem('typographyMagnate', JSON.stringify(this.state));
            },

            // –ó–ê–ì–†–£–ó–ö–ê –ò–ì–†–´
            loadGame() {
                const saved = localStorage.getItem('typographyMagnate');
                if (saved) {
                    this.state = JSON.parse(saved);
                }
            }
        };

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
        window.addEventListener('load', () => {
            game.init();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —Ç–æ—á–µ–∫
            document.querySelectorAll('.ad-point').forEach(point => {
                point.addEventListener('click', function() {
                    const pointIndex = parseInt(this.getAttribute('data-point')) - 1;
                    game.toggleAdPoint(pointIndex);
                    this.classList.toggle('active');
                });
            });
        });

        // –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï
        window.addEventListener('beforeunload', () => {
            game.saveGame();
        });
    </script>
</body>
</html>
