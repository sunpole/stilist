<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–°–µ–º–µ–π–Ω–∞—è –∏–≥—Ä–∞: 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    body {
      overflow: hidden;
      touch-action: manipulation;
      font-family: 'Comic Sans MS', cursive;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      height: 100vh;
    }
    .game-container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding: 10px;
    }
    .choices {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    .choice-btn {
      background: white;
      border: 3px solid #4a69bd;
      border-radius: 15px;
      padding: 10px;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .choice-btn:active {
      transform: scale(0.95);
      background: #4a69bd;
      color: white;
    }
    .history-btn {
      background: #4a69bd;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px;
      margin: 5px 0;
    }
    .modal-content {
      border-radius: 15px;
    }
    @media (orientation: portrait) {
      .choices {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 400px) {
      .choice-btn {
        font-size: 18px;
        padding: 8px;
      }
    }
  </style>
</head>
<body class="d-flex justify-content-center align-items-center">
  <div class="game-container text-center">
    <h1 class="mb-4">5 –≠–ª–µ–º–µ–Ω—Ç–æ–≤</h1>
    
    <!-- –¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫ -->
    <div id="currentPlayer" class="fs-4 mb-3 fw-bold text-primary">–ò–≥—Ä–æ–∫ 1</div>
    
    <!-- –í—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
    <div class="choices">
      <button class="choice-btn" data-choice="–∫–∞–º–µ–Ω—å">ü™® –ö–∞–º–µ–Ω—å</button>
      <button class="choice-btn" data-choice="–Ω–æ–∂–Ω–∏—Ü—ã">‚úÇÔ∏è –ù–æ–∂–Ω–∏—Ü—ã</button>
      <button class="choice-btn" data-choice="–±—É–º–∞–≥–∞">üìÑ –ë—É–º–∞–≥–∞</button>
      <button class="choice-btn" data-choice="—è—â–µ—Ä–∏—Ü–∞">ü¶é –Ø—â–µ—Ä–∏—Ü–∞</button>
      <button class="choice-btn" data-choice="—Å–ø–æ–∫">üññ –°–ø–æ–∫</button>
    </div>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—É–Ω–¥–∞ -->
    <div id="roundResult" class="fs-5 mb-3" style="min-height: 24px;"></div>
    
    <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <button id="historyBtn" class="history-btn">–ò—Å—Ç–æ—Ä–∏—è —Ö–æ–¥–æ–≤</button>
    <button id="restartBtn" class="btn btn-warning mt-2">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    
    <!-- –ò—Å—Ç–æ—Ä–∏—è —Ö–æ–¥–æ–≤ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ) -->
    <div class="modal fade" id="historyModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä—ã</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body" id="historyList"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã (–∫—Ç–æ –∫–æ–≥–æ –ø–æ–±–µ–∂–¥–∞–µ—Ç)
    const rules = {
      '–∫–∞–º–µ–Ω—å': ['–Ω–æ–∂–Ω–∏—Ü—ã', '—è—â–µ—Ä–∏—Ü–∞'],
      '–Ω–æ–∂–Ω–∏—Ü—ã': ['–±—É–º–∞–≥–∞', '—è—â–µ—Ä–∏—Ü–∞'],
      '–±—É–º–∞–≥–∞': ['–∫–∞–º–µ–Ω—å', '—Å–ø–æ–∫'],
      '—è—â–µ—Ä–∏—Ü–∞': ['–±—É–º–∞–≥–∞', '—Å–ø–æ–∫'],
      '—Å–ø–æ–∫': ['–∫–∞–º–µ–Ω—å', '–Ω–æ–∂–Ω–∏—Ü—ã']
    };

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    let gameState = {
      currentPlayer: 1,
      player1Choice: null,
      player2Choice: null,
      history: [],
      gameActive: true
    };

    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const elements = {
      currentPlayer: document.getElementById('currentPlayer'),
      roundResult: document.getElementById('roundResult'),
      historyBtn: document.getElementById('historyBtn'),
      restartBtn: document.getElementById('restartBtn'),
      historyModal: new bootstrap.Modal('#historyModal'),
      historyList: document.getElementById('historyList'),
      choiceBtns: document.querySelectorAll('.choice-btn')
    };

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    elements.choiceBtns.forEach(btn => {
      btn.addEventListener('click', () => handleChoice(btn.dataset.choice));
    });

    elements.historyBtn.addEventListener('click', () => {
      updateHistoryList();
      elements.historyModal.show();
    });

    elements.restartBtn.addEventListener('click', resetGame);

    // –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
    function handleChoice(choice) {
      if (!gameState.gameActive) return;

      if (gameState.currentPlayer === 1) {
        gameState.player1Choice = choice;
        gameState.currentPlayer = 2;
        elements.currentPlayer.textContent = '–ò–≥—Ä–æ–∫ 2';
        elements.roundResult.textContent = '–ò–≥—Ä–æ–∫ 1 –≤—ã–±—Ä–∞–ª ' + choice;
      } else {
        gameState.player2Choice = choice;
        gameState.currentPlayer = 1;
        elements.currentPlayer.textContent = '–ò–≥—Ä–æ–∫ 1';
        resolveRound();
      }
    }

    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è —Ä–∞—É–Ω–¥–∞
    function resolveRound() {
      const p1 = gameState.player1Choice;
      const p2 = gameState.player2Choice;
      let result;

      if (p1 === p2) {
        result = '–ù–∏—á—å—è!';
      } else if (rules[p1].includes(p2)) {
        result = '–ò–≥—Ä–æ–∫ 1 –ø–æ–±–µ–∂–¥–∞–µ—Ç!';
      } else {
        result = '–ò–≥—Ä–æ–∫ 2 –ø–æ–±–µ–∂–¥–∞–µ—Ç!';
      }

      // –ó–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é
      gameState.history.push({
        round: gameState.history.length + 1,
        player1: p1,
        player2: p2,
        result: result
      });

      elements.roundResult.innerHTML = `
        –ò–≥—Ä–æ–∫ 1: ${getEmoji(p1)} vs –ò–≥—Ä–æ–∫ 2: ${getEmoji(p2)}<br>
        <strong>${result}</strong>
      `;
    }

    // –°–±—Ä–æ—Å –∏–≥—Ä—ã
    function resetGame() {
      gameState = {
        currentPlayer: 1,
        player1Choice: null,
        player2Choice: null,
        history: [],
        gameActive: true
      };
      elements.currentPlayer.textContent = '–ò–≥—Ä–æ–∫ 1';
      elements.roundResult.textContent = '';
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
    function updateHistoryList() {
      elements.historyList.innerHTML = gameState.history.map(entry => `
        <div class="border-bottom pb-2 mb-2">
          –†–∞—É–Ω–¥ ${entry.round}:<br>
          ${getEmoji(entry.player1)} vs ${getEmoji(entry.player2)} ‚Üí ${entry.result}
        </div>
      `).join('');
    }

    // –ü–æ–ª—É—á–µ–Ω–∏–µ emoji –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞
    function getEmoji(choice) {
      const emojis = {
        '–∫–∞–º–µ–Ω—å': 'ü™®',
        '–Ω–æ–∂–Ω–∏—Ü—ã': '‚úÇÔ∏è',
        '–±—É–º–∞–≥–∞': 'üìÑ',
        '—è—â–µ—Ä–∏—Ü–∞': 'ü¶é',
        '—Å–ø–æ–∫': 'üññ'
      };
      return emojis[choice] || choice;
    }

    // –ó–∞–ø—Ä–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
    document.addEventListener('contextmenu', e => e.preventDefault());
  </script>
</body>
</html>
