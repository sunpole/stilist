<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–∏–π –ú–∞–≥–Ω–∞—Ç</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --text-color: #ecf0f1;
            --bg-color: #1a1a1a;
            --card-bg: #2c3e50;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
            padding: 5px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        /* –®–∞–ø–∫–∞ —Å –≤–∞–ª—é—Ç–∞–º–∏ */
        .header-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }

        .currency-btn {
            background: var(--card-bg);
            border: 2px solid var(--accent-color);
            border-radius: var(--border-radius);
            padding: 10px 5px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 12px;
            position: relative;
            overflow: hidden;
        }

        .currency-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .currency-value {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 2px;
            position: relative;
            z-index: 2;
        }

        .currency-subtext {
            font-size: 10px;
            opacity: 0.8;
            position: relative;
            z-index: 2;
        }

        .income { color: var(--success-color); }
        .expense { color: var(--danger-color); }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –¥–ª—è Zeal */
        .zeal-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(45deg, var(--warning-color), var(--danger-color));
            transition: width 1s linear;
            z-index: 1;
        }

        /* –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }

        .stat-btn {
            background: var(--card-bg);
            border: 1px solid var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 10px 5px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 11px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--secondary-color);
            border-radius: 3px;
            margin-top: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success-color);
            transition: width 0.5s ease;
        }

        /* –ü–∞–Ω–µ–ª—å –∫–æ–º–∞–Ω–¥—ã */
        .team-row {
            margin-bottom: 10px;
        }

        .team-btn {
            background: var(--card-bg);
            border: 1px solid var(--warning-color);
            border-radius: var(--border-radius);
            padding: 12px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
        }

        /* –≠—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ */
        .stages-row {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
            margin-bottom: 10px;
        }

        .stage-btn {
            background: var(--card-bg);
            border: 1px solid var(--accent-color);
            border-radius: var(--border-radius);
            padding: 12px 5px;
            text-align: center;
            cursor: pointer;
            font-size: 11px;
            transition: var(--transition);
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .stage-btn.active {
            background: var(--accent-color);
            transform: scale(1.05);
        }

        .stage-btn:active {
            transform: scale(0.95);
        }

        .stage-info {
            font-size: 10px;
            margin-top: 5px;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stage-orders { color: var(--warning-color); }
        .stage-employees { color: var(--success-color); }

        /* –°–ø–∏—Å–∫–∏ –∑–∞–∫–∞–∑–æ–≤ */
        .orders-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .orders-column {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 10px;
        }

        .orders-column h3 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .order-item {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 10px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border-left: 4px solid var(--accent-color);
        }

        .order-item.normal {
            border-left-color: var(--accent-color);
        }

        .order-item.rare {
            border-left-color: var(--warning-color);
        }

        .order-item.legendary {
            border-left-color: #9b59b6;
        }

        .order-type {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 3px;
            background: var(--primary-color);
        }

        .order-type.normal {
            background: var(--accent-color);
        }

        .order-type.rare {
            background: var(--warning-color);
        }

        .order-type.legendary {
            background: #9b59b6;
        }

        .order-timer {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--success-color);
            transition: width 1s linear;
        }

        .order-value {
            font-weight: bold;
            color: var(--success-color);
            font-size: 14px;
        }

        .order-percentage {
            font-size: 12px;
            opacity: 0.8;
        }

        .order-deadline {
            font-size: 11px;
            color: var(--warning-color);
            margin-top: 5px;
        }

        .order-reputation {
            font-size: 10px;
            margin-top: 3px;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            overflow-y: auto;
            padding: 10px;
        }

        .modal-content {
            background: var(--card-bg);
            margin: 20px auto;
            padding: 20px;
            border-radius: var(--border-radius);
            max-width: 95%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 12px;
        }

        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid var(--secondary-color);
        }

        th {
            background: var(--primary-color);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .zeal-active {
            color: white;
            border-color: var(--warning-color) !important;
        }

        .premium-active {
            background: linear-gradient(45deg, var(--success-color), var(--accent-color)) !important;
            color: white;
            border-color: var(--success-color) !important;
        }

        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .action-btn {
            background: var(--accent-color);
            border: none;
            border-radius: var(--border-radius);
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            margin: 5px;
            transition: var(--transition);
        }

        .action-btn:hover {
            opacity: 0.9;
        }

        .action-btn:disabled {
            background: var(--secondary-color);
            cursor: not-allowed;
        }

        /* –í–∫–ª–∞–¥–∫–∏ */
        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--secondary-color);
        }

        .tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom: 2px solid var(--accent-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .header-row,
            .stats-row {
                grid-template-columns: repeat(3, 1fr);
                gap: 3px;
            }
            
            .stages-row {
                grid-template-columns: repeat(4, 1fr);
                gap: 2px;
            }
            
            .orders-container {
                grid-template-columns: 1fr;
            }
            
            .currency-btn,
            .stat-btn {
                padding: 8px 3px;
                font-size: 10px;
            }
            
            .stage-btn {
                font-size: 9px;
                padding: 8px 2px;
                min-height: 60px;
            }
            
            .currency-value {
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .header-row,
            .stats-row {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stages-row {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal-content {
                padding: 15px;
            }
            
            table {
                font-size: 10px;
            }
            
            th, td {
                padding: 6px 4px;
            }
        }

        /* –ü–æ–ª–æ—Å–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ */
        .time-display {
            text-align: center;
            margin: 10px 0;
            font-size: 14px;
            background: var(--card-bg);
            padding: 8px;
            border-radius: var(--border-radius);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π */
        .upgrade-item {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .upgrade-item:hover {
            background: var(--primary-color);
        }

        .upgrade-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ */
        .employee-item {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .employee-controls {
            display: flex;
            gap: 5px;
        }

        .employee-control-btn {
            background: var(--accent-color);
            border: none;
            border-radius: 3px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .premium-info {
            font-size: 12px;
            margin-top: 5px;
            color: var(--warning-color);
        }

        .department-table {
            width: 100%;
            margin: 10px 0;
        }

        .department-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid var(--secondary-color);
        }

        .department-name {
            flex: 2;
        }

        .department-stats {
            flex: 1;
            text-align: center;
        }

        .department-controls {
            flex: 1;
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .finance-display {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ -->
        <div class="time-display">
            <span id="current-date">1 —Å–µ–Ω—Ç—è–±—Ä—è 2025, –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</span> | 
            <span id="current-time">08:00</span>
        </div>

        <!-- –ü–µ—Ä–≤—ã–π —Ä—è–¥ - –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–∞–ª—é—Ç—ã -->
        <div class="header-row">
            <div class="currency-btn" id="rating-btn">
                <div class="currency-value" id="rating-value">0</div>
                <div class="currency-subtext">–†–ï–ô–¢–ò–ù–ì</div>
            </div>
            <div class="currency-btn" id="byn-btn">
                <div class="currency-value" id="byn-value">2,000</div>
                <div class="currency-subtext finance-display">
                    <span class="income" id="daily-income">+0/–¥–µ–Ω—å</span>
                    <span class="expense" id="daily-expense">-0/–¥–µ–Ω—å</span>
                </div>
            </div>
            <div class="currency-btn" id="drive-btn">
                <div class="currency-value" id="drive-value">80/80</div>
                <div class="currency-subtext">DRIVE</div>
            </div>
            <div class="currency-btn" id="zeal-btn">
                <div class="zeal-progress" id="zeal-progress" style="width: 0%"></div>
                <div class="currency-value" id="zeal-value">0</div>
                <div class="currency-subtext">ZEAL</div>
            </div>
            <div class="currency-btn" id="rest-btn">
                <div class="currency-value" id="rest-value">100</div>
                <div class="currency-subtext">REST</div>
            </div>
        </div>

        <!-- –í—Ç–æ—Ä–æ–π —Ä—è–¥ - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-row">
            <div class="stat-btn" id="level-btn">
                <div>–£–†–û–í–ï–ù–¨</div>
                <div class="currency-value" id="level-value">1</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="level-progress" style="width: 0%"></div>
                </div>
            </div>
            <div class="stat-btn" id="employees-btn">
                <div>–°–û–¢–†–£–î–ù–ò–ö–ò</div>
                <div class="currency-value" id="employees-value">0/1</div>
            </div>
            <div class="stat-btn" id="advertising-btn">
                <div>–†–ï–ö–õ–ê–ú–ê</div>
                <div class="currency-value" id="advertising-value">0/10</div>
                <div class="expense" id="ad-cost">-0/–º–µ—Å</div>
            </div>
            <div class="stat-btn" id="upgrades-btn">
                <div>–£–õ–£–ß–®–ï–ù–ò–Ø</div>
                <div class="currency-value" id="upgrades-value">0/‚àû</div>
            </div>
            <div class="stat-btn" id="premium-btn">
                <div>–ü–†–ï–ú–ò–Ø</div>
                <div class="currency-value" id="premium-value">üîí 2500 BYN</div>
                <div class="premium-info" id="premium-info"></div>
            </div>
        </div>

        <!-- –¢—Ä–µ—Ç–∏–π —Ä—è–¥ - –∫–æ–º–∞–Ω–¥–∞ -->
        <div class="team-row">
            <div class="team-btn" id="team-building-btn">
                –ö–û–ú–ê–ù–î–ê - –¢–ò–ú–ë–ò–õ–î–ò–ù–ì –ú–ï–†–û–ü–†–ò–Ø–¢–ò–Ø
            </div>
        </div>

        <!-- –ß–µ—Ç–≤–µ—Ä—Ç—ã–π —Ä—è–¥ - —ç—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ -->
        <div class="stages-row">
            <div class="stage-btn" data-stage="order">
                <div>–ó–ê–ö–ê–ó</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-order">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-order-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="layout">
                <div>–ú–ê–ö–ï–¢</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-layout">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-layout-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="prepress">
                <div>–î–û–ü–ï–ß–ê–¢–ö–ê</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-prepress">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-prepress-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="press">
                <div>–ü–ï–ß–ê–¢–¨</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-press">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-press-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="postpress">
                <div>–ü–û–°–õ–ï–ü–ï–ß–ê–¢–ö–ê</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-postpress">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-postpress-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="product">
                <div>–ò–ó–î–ï–õ–ò–ï</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-product">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-product-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
            <div class="stage-btn" data-stage="shipment">
                <div>–û–¢–ì–†–£–ó–ö–ê</div>
                <div class="stage-info">
                    <div class="stage-orders" id="stage-shipment">–ó–∞–∫–∞–∑—ã: 0</div>
                    <div class="stage-employees" id="stage-shipment-employees">–°–æ—Ç—Ä: 0</div>
                </div>
            </div>
        </div>

        <!-- –ü—è—Ç—ã–π —Ä—è–¥ - –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã -->
        <div class="orders-container">
            <div class="orders-column">
                <h3>–ê–ö–¢–ò–í–ù–´–ï –ó–ê–ö–ê–ó–´</h3>
                <div id="active-orders">
                    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            <div class="orders-column">
                <h3>–î–û–°–¢–£–ü–ù–´–ï –ó–ê–ö–ê–ó–´</h3>
                <div id="available-orders">
                    <!-- –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="rating-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–†–µ–π—Ç–∏–Ω–≥ –∏ –∑–∞–∫–∞–∑—ã</h3>
            <table id="rating-table">
                <thead>
                    <tr>
                        <th>–†–ï–ô–¢–ò–ù–ì</th>
                        <th>–ú–ò–ù –ó–ê–ö–ê–ó</th>
                        <th>–ú–ê–ö–° –ó–ê–ö–ê–ó</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="byn-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–§–∏–Ω–∞–Ω—Å—ã</h3>
            <div class="income-section">
                <h4>–î–æ—Ö–æ–¥—ã:</h4>
                <div id="income-list"></div>
            </div>
            <div class="expense-section">
                <h4>–†–∞—Å—Ö–æ–¥—ã:</h4>
                <div id="expense-list"></div>
            </div>
        </div>
    </div>

    <div id="drive-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–ò—Å—Ç–æ—á–Ω–∏–∫–∏ DRIVE</h3>
            <table>
                <thead>
                    <tr>
                        <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                        <th>DRIVE/–¥–µ–Ω—å</th>
                    </tr>
                </thead>
                <tbody id="drive-sources">
                    <!-- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ DRIVE –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="employees-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h3>
            <div class="department-table">
                <div class="department-row">
                    <div class="department-name"><strong>–û—Ç–¥–µ–ª</strong></div>
                    <div class="department-stats"><strong>–ó–∞–∫–∞–∑—ã</strong></div>
                    <div class="department-stats"><strong>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</strong></div>
                    <div class="department-controls"><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</strong></div>
                </div>
                <div id="departments-list">
                    <!-- –°–ø–∏—Å–æ–∫ –æ—Ç–¥–µ–ª–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            <button class="action-btn" id="hire-employee-btn">–ù–∞–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (1,500 BYN/–º–µ—Å)</button>
            <button class="action-btn" id="hire-accountant-btn">–ù–∞–Ω—è—Ç—å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞ (2,500 BYN/–º–µ—Å)</button>
        </div>
    </div>

    <div id="advertising-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–†–µ–∫–ª–∞–º–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏</h3>
            <div id="advertising-points">
                <!-- –†–µ–∫–ª–∞–º–Ω—ã–µ —Ç–æ—á–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <div id="upgrades-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–£–ª—É—á—à–µ–Ω–∏—è</h3>
            <div class="tabs">
                <div class="tab active" data-tab="speed">–°–∫–æ—Ä–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</div>
                <div class="tab" data-tab="equipment">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</div>
            </div>
            <div class="tab-content active" id="speed-tab">
                <div id="speed-upgrades">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
            <div class="tab-content" id="equipment-tab">
                <div id="equipment-upgrades">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>
        </div>
    </div>

    <div id="team-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–¢–∏–º–±–∏–ª–¥–∏–Ω–≥ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
            <div id="team-events">
                <!-- –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <div id="level-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–£—Ä–æ–≤–Ω–∏ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏</h3>
            <table>
                <thead>
                    <tr>
                        <th>–£—Ä–æ–≤–µ–Ω—å</th>
                        <th>–ú–∞–∫—Å. —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</th>
                        <th>–ë–æ–Ω—É—Å —Ä–µ–π—Ç–∏–Ω–≥–∞</th>
                    </tr>
                </thead>
                <tbody id="level-table">
                    <!-- –¢–∞–±–ª–∏—Ü–∞ —É—Ä–æ–≤–Ω–µ–π –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="premium-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞</h3>
            <div class="premium-description">
                <p><strong>–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ –¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p>
                <ul>
                    <li>–°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ DRIVE –Ω–∞ 50%</li>
                    <li>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ 20%</li>
                    <li>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ 30%</li>
                    <li>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏</li>
                </ul>
                <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> 2500 BYN –∑–∞ 14 –¥–Ω–µ–π</p>
                <p><strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∑–∞–ø–∞—Å–∞ –¥–µ–Ω–µ–≥ –Ω–∞ 2 –º–µ—Å—è—Ü–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</p>
            </div>
            <button class="action-btn" id="activate-premium-btn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º –∑–∞ 2500 BYN</button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const CONFIG = {
            // –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
            initialByn: 2000,
            initialDrive: 80,
            maxDrive: 80,
            initialRest: 100,
            maxRest: 100,
            initialZeal: 0,
            
            // –í—Ä–µ–º—è - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 1 —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å = 8 –∏–≥—Ä–æ–≤—ã—Ö —á–∞—Å–æ–≤, 1 –∏–≥—Ä–æ–≤–æ–π —á–∞—Å = 2 —Ä–µ–∞–ª—å–Ω—ã–µ –º–∏–Ω—É—Ç—ã
            startDate: new Date(2025, 8, 1), // 1 —Å–µ–Ω—Ç—è–±—Ä—è 2025
            workDayStart: 8, // 8:00
            workDayEnd: 17, // 17:00
            realSecondsPerGameHour: 120, // 1 –∏–≥—Ä–æ–≤–æ–π —á–∞—Å = 2 —Ä–µ–∞–ª—å–Ω—ã–µ –º–∏–Ω—É—Ç—ã (120 —Å–µ–∫—É–Ω–¥)
            realSecondsPerGameMinute: 2, // 1 –∏–≥—Ä–æ–≤–∞—è –º–∏–Ω—É—Ç–∞ = 2 —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ–∫—É–Ω–¥—ã
            
            // –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
            employeeSalary: 1500,
            accountantSalary: 2500,
            employeeDrive: 80,
            
            // –£—Ä–æ–≤–Ω–∏ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏
            levels: [
                { level: 1, maxEmployees: 1, ratingBonus: 0 },
                { level: 2, maxEmployees: 2, ratingBonus: 5 },
                { level: 3, maxEmployees: 3, ratingBonus: 10 },
                { level: 4, maxEmployees: 4, ratingBonus: 15 },
                { level: 5, maxEmployees: 5, ratingBonus: 20 },
                { level: 6, maxEmployees: 6, ratingBonus: 25 },
                { level: 7, maxEmployees: 7, ratingBonus: 30 },
                { level: 8, maxEmployees: 8, ratingBonus: 35 },
                { level: 9, maxEmployees: 9, ratingBonus: 40 },
                { level: 10, maxEmployees: 10, ratingBonus: 50 }
            ],
            
            // –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –∑–∞–∫–∞–∑—ã
            ratingRanges: [
                { rating: 1, min: 50, max: 1000 },
                { rating: 100, min: 75, max: 1500 },
                { rating: 250, min: 100, max: 2000 },
                { rating: 500, min: 125, max: 2500 },
                { rating: 1000, min: 150, max: 3000 },
                { rating: 1250, min: 200, max: 4000 },
                { rating: 1500, min: 250, max: 5000 },
                { rating: 1750, min: 300, max: 6000 },
                { rating: 2000, min: 500, max: 10000 },
                { rating: 2500, min: 750, max: 15000 },
                { rating: 3000, min: 1000, max: 20000 },
                { rating: 3500, min: 1500, max: 37500 },
                { rating: 4000, min: 2000, max: 60000 },
                { rating: 5000, min: 5000, max: 250000 }
            ],
            
            // –¢–∏–ø—ã –∑–∞–∫–∞–∑–æ–≤
            orderTypes: {
                normal: {
                    chance: 70,
                    reputation: 15,
                    penalty: 75,
                    minPercentage: 0,
                    maxPercentage: 75,
                    minDeadline: { min: 10, max: 10 }, // –º–∏–Ω —Å—É–º–º–∞ -> –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫
                    maxDeadline: { min: 1, max: 1 }    // –º–∞–∫—Å —Å—É–º–º–∞ -> –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫
                },
                rare: {
                    chance: 25,
                    reputation: 25,
                    penalty: 150,
                    minPercentage: 25,
                    maxPercentage: 85,
                    minDeadline: { min: 4, max: 6 },   // –º–∏–Ω —Å—É–º–º–∞ -> —Å—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫
                    maxDeadline: { min: 6, max: 8 }    // –º–∞–∫—Å —Å—É–º–º–∞ -> –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫
                },
                legendary: {
                    chance: 5,
                    reputation: 50,
                    penalty: 100,
                    minPercentage: 75,
                    maxPercentage: 100,
                    minDeadline: { min: 10, max: 10 }, // –º–∏–Ω —Å—É–º–º–∞ -> –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫
                    maxDeadline: { min: 1, max: 1 }    // –º–∞–∫—Å —Å—É–º–º–∞ -> –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫
                }
            },
            
            // –†–µ–∫–ª–∞–º–∞
            advertisingPoints: [
                { id: 1, cost: 40500, shows: 15000, ctr: 7, bonus: 0.50 },
                { id: 2, cost: 27000, shows: 12000, ctr: 5, bonus: 0.45 },
                { id: 3, cost: 18000, shows: 10000, ctr: 4.5, bonus: 0.40 },
                { id: 4, cost: 12000, shows: 8500, ctr: 4, bonus: 0.35 },
                { id: 5, cost: 8000, shows: 7000, ctr: 3.5, bonus: 0.30 },
                { id: 6, cost: 5300, shows: 5500, ctr: 3, bonus: 0.25 },
                { id: 7, cost: 3500, shows: 4000, ctr: 2.5, bonus: 0.20 },
                { id: 8, cost: 2300, shows: 2800, ctr: 2, bonus: 0.15 },
                { id: 9, cost: 1500, shows: 1800, ctr: 1.5, bonus: 0.10 },
                { id: 10, cost: 1000, shows: 1000, ctr: 1, bonus: 0.05 }
            ],
            
            // –£–ª—É—á—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏
            speedUpgrades: [
                { level: 1, speed: 0.4, cost: 5000 },
                { level: 2, speed: 0.3, cost: 10000 },
                { level: 3, speed: 0.2, cost: 25000 }
            ],
            
            // –£–ª—É—á—à–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
            equipmentUpgradeCost: [3000, 6000, 12000, 24000, 48000],
            
            // –¢–∏–º–±–∏–ª–¥–∏–Ω–≥ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
            teamEvents: [
                { 
                    name: "–û–±–µ–¥ –≤—Å–µ –≤–º–µ—Å—Ç–µ –≤ –∫–∞—Ñ–µ", 
                    baseCost: 200, 
                    costPerEmployee: 100,
                    rating: 50,
                    zeal: 1,
                    rest: 50,
                    levelProgress: 20
                },
                { 
                    name: "–í—ã–µ–∑–¥ –Ω–∞ –ø–∏–Ω–±–æ–ª", 
                    baseCost: 1000, 
                    costPerEmployee: 250,
                    rating: 150,
                    zeal: 1,
                    rest: 60,
                    levelProgress: 35
                },
                { 
                    name: "–°–æ–≤–º–µ—Å—Ç–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è –≤ –¥—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥", 
                    baseCost: 3000, 
                    costPerEmployee: 600,
                    rating: 300,
                    zeal: 1,
                    rest: 70,
                    levelProgress: 50
                },
                { 
                    name: "–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤", 
                    baseCost: 15000, 
                    costPerEmployee: 1500,
                    rating: 400,
                    zeal: 1,
                    rest: 80,
                    levelProgress: 75
                },
                { 
                    name: "–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏", 
                    baseCost: 35000, 
                    costPerEmployee: 5000,
                    rating: 500,
                    zeal: 2,
                    rest: 90,
                    levelProgress: 95
                }
            ],
            
            // –°–µ–∑–æ–Ω–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–∫–∞–∑–æ–≤
            seasonalModifiers: {
                8: 1.00,   // –°–µ–Ω—Ç—è–±—Ä—å
                9: 1.10,   // –û–∫—Ç—è–±—Ä—å
                10: 1.25,  // –ù–æ—è–±—Ä—å
                11: 1.50,  // –î–µ–∫–∞–±—Ä—å
                0: 0.90,   // –Ø–Ω–≤–∞—Ä—å
                1: 0.85,   // –§–µ–≤—Ä–∞–ª—å
                2: 0.80,   // –ú–∞—Ä—Ç
                3: 0.75,   // –ê–ø—Ä–µ–ª—å
                4: 0.60,   // –ú–∞–π
                5: 0.50,   // –ò—é–Ω—å
                6: 0.40,   // –ò—é–ª—å
                7: 0.30    // –ê–≤–≥—É—Å—Ç
            }
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const gameState = {
            // –í–∞–ª—é—Ç—ã
            rating: 0,
            byn: CONFIG.initialByn,
            drive: CONFIG.initialDrive,
            maxDrive: CONFIG.maxDrive,
            zeal: CONFIG.initialZeal,
            rest: CONFIG.initialRest,
            
            // –í—Ä–µ–º—è
            currentDate: new Date(CONFIG.startDate),
            gameTimeMultiplier: 1,
            lastDriveDeduction: new Date(CONFIG.startDate),
            lastOrderGeneration: new Date(CONFIG.startDate),
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å
            level: 1,
            levelProgress: 0,
            employees: 0,
            maxEmployees: 1,
            hasAccountant: false,
            completedOrders: 0,
            completedOrdersWithoutPenalty: 0,
            
            // –ó–∞–∫–∞–∑—ã
            activeOrders: [],
            availableOrders: [],
            ordersInProgress: {
                order: [],
                layout: [],
                prepress: [],
                press: [],
                postpress: [],
                product: [],
                shipment: []
            },
            
            // –£–ª—É—á—à–µ–Ω–∏—è
            upgrades: {
                speed: 0,
                equipment: [0, 0, 0, 0, 0, 0, 0] // –¥–ª—è 7 —ç—Ç–∞–ø–æ–≤
            },
            
            // –†–µ–∫–ª–∞–º–∞
            advertising: [],
            
            // –°–æ—Å—Ç–æ—è–Ω–∏—è
            zealActive: false,
            zealCooldown: 0,
            zealDuration: 0,
            premiumActive: false,
            premiumCooldown: 0,
            premiumDuration: 0,
            
            // –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
            employeeAssignments: [],
            
            // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            lastUpdateTime: Date.now(),
            
            // –§–∏–Ω–∞–Ω—Å—ã
            dailyIncome: 0,
            dailyExpense: 0
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ localStorage (–µ—Å–ª–∏ –µ—Å—Ç—å)
            loadGameState();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            updateUI();
            setupEventListeners();
            
            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
            startGameLoop();
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            generateInitialOrders();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∏ —ç—Ç–∞–ø–æ–≤
            document.querySelectorAll('.stage-btn').forEach(btn => {
                btn.addEventListener('click', handleStageClick);
            });
            
            // –ö–Ω–æ–ø–∫–∏ –≤–∞–ª—é—Ç
            document.getElementById('rating-btn').addEventListener('click', showRatingModal);
            document.getElementById('byn-btn').addEventListener('click', showBynModal);
            document.getElementById('drive-btn').addEventListener('click', showDriveModal);
            document.getElementById('zeal-btn').addEventListener('click', activateZeal);
            document.getElementById('rest-btn').addEventListener('click', exchangeRestForZeal);
            
            // –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            document.getElementById('level-btn').addEventListener('click', showLevelModal);
            document.getElementById('employees-btn').addEventListener('click', showEmployeesModal);
            document.getElementById('advertising-btn').addEventListener('click', showAdvertisingModal);
            document.getElementById('upgrades-btn').addEventListener('click', showUpgradesModal);
            document.getElementById('premium-btn').addEventListener('click', showPremiumModal);
            
            // –ö–Ω–æ–ø–∫–∞ –∫–æ–º–∞–Ω–¥—ã
            document.getElementById('team-building-btn').addEventListener('click', showTeamModal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', closeModals);
            });
            
            // –í–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', handleTabClick);
            });
            
            // –ö–Ω–æ–ø–∫–∏ –Ω–∞–π–º–∞
            document.getElementById('hire-employee-btn').addEventListener('click', hireEmployee);
            document.getElementById('hire-accountant-btn').addEventListener('click', hireAccountant);
            
            // –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–µ–º–∏—É–º–∞
            document.getElementById('activate-premium-btn').addEventListener('click', activatePremium);
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –ø–æ –∑–∞–∫–∞–∑–∞–º
            document.addEventListener('click', function(e) {
                if (e.target.closest('.order-item')) {
                    const orderElement = e.target.closest('.order-item');
                    const orderId = parseInt(orderElement.dataset.orderId);
                    
                    if (orderElement.closest('#available-orders')) {
                        takeOrder(orderId);
                    }
                }
            });
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
        function startGameLoop() {
            setInterval(() => {
                updateGameTime();
                processAutomaticWork();
                updateOrders();
                generateOrdersOverTime();
                deductDriveHourly();
                updateFinance();
                updateUI();
                checkGameConditions();
                saveGameState();
            }, 1000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
        function updateGameTime() {
            const now = Date.now();
            const realTimeDelta = (now - gameState.lastUpdateTime) / 1000; // –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ–∫—É–Ω–¥–∞—Ö
            gameState.lastUpdateTime = now;
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –∏–≥—Ä–æ–≤–æ–µ
            const gameTimeDelta = realTimeDelta / CONFIG.realSecondsPerGameMinute * gameState.gameTimeMultiplier;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
            gameState.currentDate.setMinutes(gameState.currentDate.getMinutes() + gameTimeDelta);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ REST (—Ä–∞—Å—Ö–æ–¥ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è)
            if (isWorkTime() && isWorkDay()) {
                const hoursInWorkDay = CONFIG.workDayEnd - CONFIG.workDayStart;
                const restLossPerMinute = 24 / (hoursInWorkDay * 60);
                gameState.rest = Math.max(0, gameState.rest - (restLossPerMinute * gameTimeDelta));
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ZEAL –∏ PREMIUM
            if (gameState.zealActive) {
                gameState.zealDuration -= gameTimeDelta;
                if (gameState.zealDuration <= 0) {
                    gameState.zealActive = false;
                    gameState.zealCooldown = 3; // 3 –¥–Ω—è –∫—É–ª–¥–∞—É–Ω–∞
                    gameState.maxDrive = calculateMaxDrive();
                    gameState.gameTimeMultiplier = 1;
                }
            }
            
            if (gameState.premiumActive) {
                gameState.premiumDuration -= gameTimeDelta;
                if (gameState.premiumDuration <= 0) {
                    gameState.premiumActive = false;
                    gameState.premiumCooldown = 30; // 30 –¥–Ω–µ–π –∫—É–ª–¥–∞—É–Ω–∞
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ–Ω—ã –¥–Ω—è
            const oldDate = new Date(gameState.currentDate);
            oldDate.setMinutes(oldDate.getMinutes() - gameTimeDelta);
            
            if (gameState.currentDate.getDate() !== oldDate.getDate()) {
                startNewDay();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
        function updateFinance() {
            // –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–æ–≤
            let dailyIncome = 0;
            gameState.activeOrders.forEach(order => {
                dailyIncome += order.value / order.deadline;
            });
            
            // –†–∞—Å—á–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤
            let monthlyExpenses = 0;
            monthlyExpenses += gameState.employees * CONFIG.employeeSalary;
            if (gameState.hasAccountant) {
                monthlyExpenses += CONFIG.accountantSalary;
            }
            gameState.advertising.forEach(ad => {
                monthlyExpenses += ad.cost * 30;
            });
            
            const dailyExpense = monthlyExpenses / 30;
            
            gameState.dailyIncome = dailyIncome;
            gameState.dailyExpense = dailyExpense;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è
        function isWorkDay() {
            const dayOfWeek = gameState.currentDate.getDay();
            return dayOfWeek >= 1 && dayOfWeek <= 5; // –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ü—è—Ç–Ω–∏—Ü–∞
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
        function isWorkTime() {
            const hour = gameState.currentDate.getHours();
            return hour >= CONFIG.workDayStart && hour < CONFIG.workDayEnd;
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–Ω–æ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
        function getSeasonalModifier() {
            const month = gameState.currentDate.getMonth();
            return CONFIG.seasonalModifiers[month] || 1;
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ (–ø—è—Ç–Ω–∏—Ü–∞ +20%)
        function getDayModifier() {
            const dayOfWeek = gameState.currentDate.getDay();
            return dayOfWeek === 5 ? 1.2 : 1; // –ü—è—Ç–Ω–∏—Ü–∞ = +20%
        }

        // –ï–∂–µ—á–∞—Å–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ DRIVE
        function deductDriveHourly() {
            const currentTime = new Date(gameState.currentDate);
            const timeDiff = currentTime - gameState.lastDriveDeduction;
            const hoursPassed = timeDiff / (1000 * 60 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö —á–∞—Å–∞—Ö
            
            if (hoursPassed >= 1) {
                const totalWorkers = gameState.employees + 1; // –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ + –∏–≥—Ä–æ–∫
                gameState.drive = Math.max(0, gameState.drive - totalWorkers);
                gameState.lastDriveDeduction = new Date(gameState.currentDate);
            }
        }

        // –ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –¥–Ω—è
        function startNewDay() {
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ DRIVE
            gameState.drive = gameState.maxDrive;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ REST
            if (gameState.activeOrders.length === 0) {
                gameState.rest = CONFIG.maxRest;
            } else {
                gameState.rest = Math.min(CONFIG.maxRest, gameState.rest + 50);
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É–ª–¥–∞—É–Ω–æ–≤
            if (gameState.zealCooldown > 0) gameState.zealCooldown--;
            if (gameState.premiumCooldown > 0) gameState.premiumCooldown--;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è –∑–∞ –¥–µ–Ω—å
            addLevelProgress(2.5);
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            generateNewOrders();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
        function generateOrdersOverTime() {
            const currentTime = new Date(gameState.currentDate);
            const timeDiff = currentTime - gameState.lastOrderGeneration;
            const hoursPassed = timeDiff / (1000 * 60 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö —á–∞—Å–∞—Ö
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –∫–∞–∂–¥—ã–µ 2 –∏–≥—Ä–æ–≤—ã—Ö —á–∞—Å–∞
            if (hoursPassed >= 2 && isWorkDay() && isWorkTime()) {
                generateNewOrders();
                gameState.lastOrderGeneration = new Date(gameState.currentDate);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        function processAutomaticWork() {
            if (!isWorkTime() || !isWorkDay()) return;
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
            const stages = ['order', 'layout', 'prepress', 'press', 'postpress', 'product', 'shipment'];
            
            stages.forEach(stage => {
                const employeesInStage = gameState.employeeAssignments.filter(a => a.stage === stage).length;
                if (employeesInStage > 0 && gameState.ordersInProgress[stage].length > 0) {
                    // –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                    let processTime = 0.5; // –±–∞–∑–æ–≤–æ–µ –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                    if (gameState.upgrades.speed > 0) {
                        processTime = CONFIG.speedUpgrades[gameState.upgrades.speed - 1].speed;
                    }
                    if (gameState.zealActive) {
                        processTime /= 10; // –í 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ ZEAL
                    }
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ
                    const ordersToProcess = Math.min(
                        employeesInStage, 
                        gameState.ordersInProgress[stage].length
                    );
                    
                    for (let i = 0; i < ordersToProcess; i++) {
                        const orderId = gameState.ordersInProgress[stage][0];
                        const order = gameState.activeOrders.find(o => o.id === orderId);
                        
                        if (order) {
                            order.progress = (order.progress || 0) + (1 / processTime);
                            
                            if (order.progress >= 1) {
                                // –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ
                                order.progress = 0;
                                advanceOrderToNextStage(orderId);
                            }
                        }
                    }
                }
            });
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
        function advanceOrderToNextStage(orderId) {
            const order = gameState.activeOrders.find(o => o.id === orderId);
            if (!order) return;
            
            const stages = ['order', 'layout', 'prepress', 'press', 'postpress', 'product', 'shipment'];
            const currentStageIndex = stages.indexOf(order.currentStage);
            
            if (currentStageIndex < stages.length - 1) {
                // –£–¥–∞–ª—è–µ–º –∑–∞–∫–∞–∑ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞
                const currentStageArray = gameState.ordersInProgress[order.currentStage];
                const orderIndex = currentStageArray.indexOf(orderId);
                if (orderIndex > -1) {
                    currentStageArray.splice(orderIndex, 1);
                }
                
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
                order.currentStage = stages[currentStageIndex + 1];
                gameState.ordersInProgress[order.currentStage].push(orderId);
            } else {
                // –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω
                completeOrder(orderId);
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function completeOrder(orderId) {
            const orderIndex = gameState.activeOrders.findIndex(o => o.id === orderId);
            if (orderIndex === -1) return;
            
            const order = gameState.activeOrders[orderIndex];
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥–µ–Ω–µ–≥
            gameState.byn += order.value;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞
            gameState.rating += order.ratingReward;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
            const levelProgress = 1 + (order.percentage / 10);
            addLevelProgress(levelProgress);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ –∑–∞–∫–∞–∑–æ–≤
            gameState.completedOrders++;
            gameState.completedOrdersWithoutPenalty++;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ–Ω—É—Å–∞ –∑–∞ 10 –∑–∞–∫–∞–∑–æ–≤
            if (gameState.completedOrdersWithoutPenalty >= 10) {
                addLevelProgress(20);
                gameState.completedOrdersWithoutPenalty = 0;
            }
            
            // –†–∞—Å—Ö–æ–¥ REST
            gameState.rest = Math.max(0, gameState.rest - 0.1);
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
            const stageArray = gameState.ordersInProgress[order.currentStage];
            const stageIndex = stageArray.indexOf(orderId);
            if (stageIndex > -1) {
                stageArray.splice(stageIndex, 1);
            }
            gameState.activeOrders.splice(orderIndex, 1);
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
        function addLevelProgress(percent) {
            gameState.levelProgress += percent;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
            while (gameState.levelProgress >= 100) {
                const nextLevel = gameState.level + 1;
                const nextLevelConfig = CONFIG.levels.find(l => l.level === nextLevel);
                
                if (nextLevelConfig) {
                    // –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                    gameState.level = nextLevel;
                    gameState.maxEmployees = nextLevelConfig.maxEmployees;
                    gameState.rating += nextLevelConfig.ratingBonus;
                    gameState.levelProgress -= 100;
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ DRIVE
                    gameState.maxDrive = calculateMaxDrive();
                } else {
                    // –î–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
                    gameState.levelProgress = 100;
                    break;
                }
            }
        }

        // –†–∞—Å—á–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ DRIVE
        function calculateMaxDrive() {
            let baseDrive = CONFIG.initialDrive;
            let employeeDrive = gameState.employees * CONFIG.employeeDrive;
            
            if (gameState.zealActive) {
                baseDrive += gameState.level * 2;
            }
            
            return baseDrive + employeeDrive;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —ç—Ç–∞–ø—É
        function handleStageClick(event) {
            const stage = event.currentTarget.dataset.stage;
            const cost = calculateDriveCost();
            
            if (gameState.drive >= cost && gameState.ordersInProgress[stage].length > 0) {
                // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
                const orderId = gameState.ordersInProgress[stage][0];
                advanceOrderToNextStage(orderId);
                
                // –†–∞—Å—Ö–æ–¥ DRIVE
                gameState.drive -= cost;
            }
        }

        // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ DRIVE
        function calculateDriveCost() {
            let cost = 1;
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
            const equipmentBonus = gameState.upgrades.equipment.reduce((sum, val) => sum + val * 0.0005, 0);
            cost *= (1 - equipmentBonus);
            
            // –ë–æ–Ω—É—Å –ø—Ä–µ–º–∏–∏
            if (gameState.premiumActive) {
                cost *= 0.5;
            }
            
            return Math.max(0.1, cost);
        }

        // –í–∑—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞
        function takeOrder(orderId) {
            const orderIndex = gameState.availableOrders.findIndex(o => o.id === orderId);
            if (orderIndex === -1) return;
            
            const order = gameState.availableOrders[orderIndex];
            
            // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ
            gameState.activeOrders.push({
                ...order,
                currentStage: 'order',
                progress: 0,
                startTime: new Date(gameState.currentDate)
            });
            
            gameState.ordersInProgress.order.push(order.id);
            gameState.availableOrders.splice(orderIndex, 1);
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è ZEAL
        function activateZeal() {
            if (gameState.zeal > 0 && !gameState.zealActive && gameState.zealCooldown === 0) {
                gameState.zeal--;
                gameState.zealActive = true;
                gameState.zealDuration = 24 * 60; // 24 —á–∞—Å–∞ –≤ –∏–≥—Ä–æ–≤—ã—Ö –º–∏–Ω—É—Ç–∞—Ö
                
                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ DRIVE
                gameState.maxDrive = calculateMaxDrive();
                gameState.drive = gameState.maxDrive; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º DRIVE
                
                // –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
                gameState.gameTimeMultiplier = 10;
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                document.getElementById('zeal-btn').classList.add('zeal-active');
            }
        }

        // –û–±–º–µ–Ω REST –Ω–∞ ZEAL
        function exchangeRestForZeal() {
            if (gameState.rest >= 30) {
                gameState.rest -= 30;
                gameState.zeal++;
            }
        }

        // –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–µ–º–∏–∏
        function calculatePremiumCost() {
            // –†–∞—Å—á–µ—Ç –º–µ—Å—è—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
            let monthlyExpenses = 0;
            
            // –ó–∞—Ä–ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
            monthlyExpenses += gameState.employees * CONFIG.employeeSalary;
            if (gameState.hasAccountant) {
                monthlyExpenses += CONFIG.accountantSalary;
            }
            
            // –†–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–µ–∫–ª–∞–º—É
            gameState.advertising.forEach(ad => {
                monthlyExpenses += ad.cost * 30; // –ü–µ—Ä–µ–≤–æ–¥–∏–º –¥–Ω–µ–≤–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –º–µ—Å—è—á–Ω—É—é
            });
            
            const twoMonthsExpenses = monthlyExpenses * 2;
            const availableSurplus = gameState.byn - twoMonthsExpenses;
            
            if (availableSurplus > 0) {
                return {
                    cost: 2500,
                    monthlyExpenses: monthlyExpenses,
                    twoMonthsExpenses: twoMonthsExpenses,
                    availableSurplus: availableSurplus
                };
            }
            
            return {
                cost: 2500,
                monthlyExpenses: monthlyExpenses,
                twoMonthsExpenses: twoMonthsExpenses,
                availableSurplus: availableSurplus
            };
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–º–∏–∏
        function showPremiumModal() {
            const modal = document.getElementById('premium-modal');
            modal.style.display = 'block';
        }

        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è PREMIUM
        function activatePremium() {
            if (gameState.premiumCooldown > 0 || gameState.premiumActive) return;
            
            const premiumData = calculatePremiumCost();
            
            if (premiumData.cost > 0 && gameState.byn >= premiumData.cost) {
                gameState.byn -= premiumData.cost;
                gameState.premiumActive = true;
                gameState.premiumDuration = 14 * 24 * 60; // 14 –¥–Ω–µ–π –≤ –∏–≥—Ä–æ–≤—ã—Ö –º–∏–Ω—É—Ç–∞—Ö
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                document.getElementById('premium-btn').classList.add('premium-active');
                closeModals();
            }
        }

        // –ù–∞–π–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
        function hireEmployee() {
            if (gameState.employees < gameState.maxEmployees && gameState.byn >= CONFIG.employeeSalary) {
                gameState.employees++;
                gameState.byn -= CONFIG.employeeSalary;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
                addLevelProgress(25);
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ DRIVE
                gameState.maxDrive = calculateMaxDrive();
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ assignments (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–µ—Ä–≤—ã–π –æ—Ç–¥–µ–ª)
                gameState.employeeAssignments.push({
                    id: Date.now(),
                    type: 'employee',
                    stage: 'order'
                });
                
                closeModals();
            }
        }

        // –ù–∞–π–º –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞
        function hireAccountant() {
            if (!gameState.hasAccountant && gameState.byn >= CONFIG.accountantSalary) {
                gameState.hasAccountant = true;
                gameState.byn -= CONFIG.accountantSalary;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
                addLevelProgress(25);
                
                closeModals();
            }
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –º–µ–∂–¥—É –æ—Ç–¥–µ–ª–∞–º–∏
        function moveEmployee(employeeId, newStage) {
            const employee = gameState.employeeAssignments.find(e => e.id === employeeId);
            if (employee) {
                employee.stage = newStage;
                showEmployeesModal(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
        function generateInitialOrders() {
            generateNewOrders();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
        function generateNewOrders() {
            const currentRange = getCurrentRatingRange();
            const seasonalModifier = getSeasonalModifier();
            const dayModifier = getDayModifier();
            const totalModifier = seasonalModifier * dayModifier;
            
            const baseOrderCount = 3 + Math.floor(Math.random() * 3);
            const orderCount = Math.max(1, Math.round(baseOrderCount * totalModifier));
            
            for (let i = 0; i < orderCount; i++) {
                // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞
                const orderType = getRandomOrderType();
                const typeConfig = CONFIG.orderTypes[orderType];
                
                // –†–∞—Å—á–µ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
                const minValue = currentRange.min;
                const maxValue = currentRange.max;
                const percentageRange = typeConfig.maxPercentage - typeConfig.minPercentage;
                const randomPercentage = typeConfig.minPercentage + Math.random() * percentageRange;
                const value = minValue + (maxValue - minValue) * (randomPercentage / 100);
                
                // –†–∞—Å—á–µ—Ç –¥–µ–¥–ª–∞–π–Ω–∞
                const valueRatio = (value - minValue) / (maxValue - minValue);
                let deadline;
                
                if (valueRatio < 0.5) {
                    // –ú–µ–Ω—å—à–∞—è —Å—É–º–º–∞ -> –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ä–æ–∫
                    deadline = typeConfig.minDeadline.min + 
                              Math.random() * (typeConfig.minDeadline.max - typeConfig.minDeadline.min);
                } else {
                    // –ë–æ–ª—å—à–∞—è —Å—É–º–º–∞ -> –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫
                    deadline = typeConfig.maxDeadline.min + 
                              Math.random() * (typeConfig.maxDeadline.max - typeConfig.maxDeadline.min);
                }
                
                gameState.availableOrders.push({
                    id: Date.now() + Math.random(),
                    value: Math.round(value),
                    percentage: Math.round(randomPercentage),
                    deadline: Math.round(deadline),
                    type: orderType,
                    timeLeft: 3 * 60, // 3 –∏–≥—Ä–æ–≤—ã—Ö —á–∞—Å–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
                    ratingReward: typeConfig.reputation,
                    ratingPenalty: typeConfig.penalty
                });
            }
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞
        function getRandomOrderType() {
            const random = Math.random() * 100;
            let cumulative = 0;
            
            for (const [type, config] of Object.entries(CONFIG.orderTypes)) {
                cumulative += config.chance;
                if (random <= cumulative) {
                    return type;
                }
            }
            
            return 'normal';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
        function updateOrders() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            gameState.availableOrders.forEach(order => {
                order.timeLeft -= gameState.gameTimeMultiplier;
            });
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            gameState.availableOrders = gameState.availableOrders.filter(order => order.timeLeft > 0);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–¥–ª–∞–π–Ω–æ–≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            gameState.activeOrders.forEach(order => {
                const timePassed = (new Date(gameState.currentDate) - order.startTime) / (1000 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö –º–∏–Ω—É—Ç–∞—Ö
                const workDaysPassed = timePassed / (24 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö –¥–Ω—è—Ö
                
                if (workDaysPassed > order.deadline + 1) {
                    // –®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É
                    gameState.rating -= order.ratingPenalty;
                    gameState.completedOrdersWithoutPenalty = 0;
                    
                    // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
                    const activeIndex = gameState.activeOrders.indexOf(order);
                    if (activeIndex > -1) {
                        gameState.activeOrders.splice(activeIndex, 1);
                    }
                    
                    const stageArray = gameState.ordersInProgress[order.currentStage];
                    const stageIndex = stageArray.indexOf(order.id);
                    if (stageIndex > -1) {
                        stageArray.splice(stageIndex, 1);
                    }
                }
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
        function getCurrentRatingRange() {
            for (let i = CONFIG.ratingRanges.length - 1; i >= 0; i--) {
                if (gameState.rating >= CONFIG.ratingRanges[i].rating) {
                    return CONFIG.ratingRanges[i];
                }
            }
            return CONFIG.ratingRanges[0];
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –∏–≥—Ä—ã
        function checkGameConditions() {
            // –ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
            if (gameState.byn <= 0) {
                // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
                alert('–ë–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.');
                resetGame();
            }
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
            Object.assign(gameState, {
                rating: 0,
                byn: CONFIG.initialByn,
                drive: CONFIG.initialDrive,
                maxDrive: CONFIG.maxDrive,
                zeal: CONFIG.initialZeal,
                rest: CONFIG.initialRest,
                currentDate: new Date(CONFIG.startDate),
                lastDriveDeduction: new Date(CONFIG.startDate),
                lastOrderGeneration: new Date(CONFIG.startDate),
                level: 1,
                levelProgress: 0,
                employees: 0,
                maxEmployees: 1,
                hasAccountant: false,
                completedOrders: 0,
                completedOrdersWithoutPenalty: 0,
                activeOrders: [],
                availableOrders: [],
                ordersInProgress: {
                    order: [],
                    layout: [],
                    prepress: [],
                    press: [],
                    postpress: [],
                    product: [],
                    shipment: []
                },
                upgrades: {
                    speed: 0,
                    equipment: [0, 0, 0, 0, 0, 0, 0]
                },
                advertising: [],
                zealActive: false,
                zealCooldown: 0,
                zealDuration: 0,
                premiumActive: false,
                premiumCooldown: 0,
                premiumDuration: 0,
                employeeAssignments: [],
                lastUpdateTime: Date.now(),
                dailyIncome: 0,
                dailyExpense: 0
            });
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤
            generateInitialOrders();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function saveGameState() {
            localStorage.setItem('typographyMagnateSave', JSON.stringify(gameState));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
        function loadGameState() {
            const saved = localStorage.getItem('typographyMagnateSave');
            if (saved) {
                const savedState = JSON.parse(saved);
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã
                savedState.currentDate = new Date(savedState.currentDate);
                savedState.lastDriveDeduction = new Date(savedState.lastDriveDeduction);
                savedState.lastOrderGeneration = new Date(savedState.lastOrderGeneration);
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω –∑–∞–∫–∞–∑–æ–≤
                savedState.activeOrders.forEach(order => {
                    order.startTime = new Date(order.startTime);
                });
                
                Object.assign(gameState, savedState);
                gameState.lastUpdateTime = Date.now();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
            updateTimeDisplay();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤–∞–ª—é—Ç
            document.getElementById('rating-value').textContent = gameState.rating.toLocaleString();
            document.getElementById('byn-value').textContent = gameState.byn.toLocaleString();
            document.getElementById('drive-value').textContent = `${Math.floor(gameState.drive)}/${gameState.maxDrive}`;
            document.getElementById('zeal-value').textContent = gameState.zeal;
            document.getElementById('rest-value').textContent = Math.floor(gameState.rest);
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤
            document.getElementById('daily-income').textContent = `+${Math.round(gameState.dailyIncome)}/–¥–µ–Ω—å`;
            document.getElementById('daily-expense').textContent = `-${Math.round(gameState.dailyExpense)}/–¥–µ–Ω—å`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            document.getElementById('level-value').textContent = gameState.level;
            document.getElementById('level-progress').style.width = `${gameState.levelProgress}%`;
            
            document.getElementById('employees-value').textContent = 
                `${gameState.employees}/${gameState.maxEmployees}`;
                
            document.getElementById('advertising-value').textContent = 
                `${gameState.advertising.length}/10`;
                
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤ —É–ª—É—á—à–µ–Ω–∏–π
            const totalUpgrades = gameState.upgrades.speed + gameState.upgrades.equipment.reduce((a, b) => a + b, 0);
            document.getElementById('upgrades-value').textContent = `${totalUpgrades}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤
            updateStagesDisplay();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –∑–∞–∫–∞–∑–æ–≤
            updateOrdersDisplay();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
            updateButtonsState();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–º–∏–∏
            updatePremiumInfo();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞ Zeal
            updateZealProgress();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞ Zeal
        function updateZealProgress() {
            const zealProgress = document.getElementById('zeal-progress');
            if (gameState.zealActive) {
                const progressPercent = (gameState.zealDuration / (24 * 60)) * 100;
                zealProgress.style.width = `${progressPercent}%`;
            } else {
                zealProgress.style.width = '0%';
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        function updateTimeDisplay() {
            const days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
            const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
            
            const date = gameState.currentDate;
            const dayOfWeek = days[date.getDay()];
            const day = date.getDate();
            const month = months[date.getMonth()];
            const year = date.getFullYear();
            
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            
            document.getElementById('current-date').textContent = 
                `${day} ${month} ${year}, ${dayOfWeek}`;
            document.getElementById('current-time').textContent = 
                `${hours}:${minutes}`;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç—Ç–∞–ø–æ–≤
        function updateStagesDisplay() {
            const stages = ['order', 'layout', 'prepress', 'press', 'postpress', 'product', 'shipment'];
            const stageNames = {
                order: '–ó–∞–∫–∞–∑',
                layout: '–ú–∞–∫–µ—Ç', 
                prepress: '–î–æ–ø–µ—á–∞—Ç–∫–∞',
                press: '–ü–µ—á–∞—Ç—å',
                postpress: '–ü–æ—Å–ª–µ–ø–µ—á–∞—Ç–∫–∞',
                product: '–ò–∑–¥–µ–ª–∏–µ',
                shipment: '–û—Ç–≥—Ä—É–∑–∫–∞'
            };
            
            stages.forEach(stage => {
                const orderCount = gameState.ordersInProgress[stage].length;
                const employeeCount = gameState.employeeAssignments.filter(e => e.stage === stage).length;
                
                document.getElementById(`stage-${stage}`).textContent = `–ó–∞–∫–∞–∑—ã: ${orderCount}`;
                document.getElementById(`stage-${stage}-employees`).textContent = `–°–æ—Ç—Ä: ${employeeCount}`;
                
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤
                const stageElement = document.querySelector(`[data-stage="${stage}"]`);
                if (orderCount > 0 && gameState.drive >= calculateDriveCost()) {
                    stageElement.classList.add('active');
                } else {
                    stageElement.classList.remove('active');
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤
        function updateOrdersDisplay() {
            updateActiveOrdersDisplay();
            updateAvailableOrdersDisplay();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
        function updateActiveOrdersDisplay() {
            const container = document.getElementById('active-orders');
            container.innerHTML = '';
            
            gameState.activeOrders.forEach(order => {
                const timePassed = (new Date(gameState.currentDate) - order.startTime) / (1000 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö –º–∏–Ω—É—Ç–∞—Ö
                const workDaysPassed = timePassed / (24 * 60); // –≤ –∏–≥—Ä–æ–≤—ã—Ö –¥–Ω—è—Ö
                const timeLeft = Math.max(0, order.deadline - workDaysPassed);
                const timePercent = Math.max(0, (timeLeft / order.deadline) * 100);
                
                const orderElement = document.createElement('div');
                orderElement.className = `order-item ${order.type}`;
                orderElement.dataset.orderId = order.id;
                
                const typeNames = {
                    normal: '–û–±—ã—á–Ω—ã–π',
                    rare: '–†–µ–¥–∫–∏–π',
                    legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'
                };
                
                orderElement.innerHTML = `
                    <div class="order-type ${order.type}">${typeNames[order.type]}</div>
                    <div class="order-value">${order.value.toLocaleString()} BYN</div>
                    <div class="order-percentage">${order.percentage}% –æ—Ç –º–∞–∫—Å.</div>
                    <div class="order-deadline">–≠—Ç–∞–ø: ${order.currentStage} | –î–µ–¥–ª–∞–π–Ω: ${timeLeft.toFixed(1)} –¥–Ω.</div>
                    <div class="order-reputation">–†–µ–ø—É—Ç–∞—Ü–∏—è: +${order.ratingReward} / -${order.ratingPenalty}</div>
                    <div class="order-timer" style="width: ${timePercent}%"></div>
                `;
                
                container.appendChild(orderElement);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
        function updateAvailableOrdersDisplay() {
            const container = document.getElementById('available-orders');
            container.innerHTML = '';
            
            gameState.availableOrders.forEach(order => {
                const timePercent = (order.timeLeft / (3 * 60)) * 100;
                
                const orderElement = document.createElement('div');
                orderElement.className = `order-item ${order.type}`;
                orderElement.dataset.orderId = order.id;
                
                const typeNames = {
                    normal: '–û–±—ã—á–Ω—ã–π',
                    rare: '–†–µ–¥–∫–∏–π',
                    legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'
                };
                
                orderElement.innerHTML = `
                    <div class="order-type ${order.type}">${typeNames[order.type]}</div>
                    <div class="order-value">${order.value.toLocaleString()} BYN</div>
                    <div class="order-percentage">${order.percentage}% –æ—Ç –º–∞–∫—Å.</div>
                    <div class="order-deadline">–î–µ–¥–ª–∞–π–Ω: ${order.deadline} –¥–Ω.</div>
                    <div class="order-reputation">–†–µ–ø—É—Ç–∞—Ü–∏—è: +${order.ratingReward} / -${order.ratingPenalty}</div>
                    <div class="order-timer" style="width: ${timePercent}%"></div>
                `;
                
                container.appendChild(orderElement);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫
        function updateButtonsState() {
            // –ö–Ω–æ–ø–∫–∞ ZEAL
            const zealBtn = document.getElementById('zeal-btn');
            if (gameState.zealActive) {
                zealBtn.classList.add('zeal-active');
                zealBtn.querySelector('.currency-value').textContent = `${gameState.zeal} (–∞–∫—Ç–∏–≤–µ–Ω)`;
            } else {
                zealBtn.classList.remove('zeal-active');
                zealBtn.querySelector('.currency-value').textContent = gameState.zeal;
                
                if (gameState.zealCooldown > 0) {
                    zealBtn.querySelector('.currency-subtext').textContent = `ZEAL (${gameState.zealCooldown}–¥)`;
                } else {
                    zealBtn.querySelector('.currency-subtext').textContent = 'ZEAL';
                }
            }
            
            // –ö–Ω–æ–ø–∫–∞ PREMIUM
            const premiumBtn = document.getElementById('premium-btn');
            if (gameState.premiumActive) {
                premiumBtn.classList.add('premium-active');
                premiumBtn.querySelector('.currency-value').textContent = 'üîì 2500 BYN';
            } else if (gameState.premiumCooldown > 0) {
                premiumBtn.querySelector('.currency-value').textContent = `${gameState.premiumCooldown}–¥`;
                premiumBtn.classList.remove('premium-active');
            } else {
                premiumBtn.querySelector('.currency-value').textContent = 'üîí 2500 BYN';
                premiumBtn.classList.remove('premium-active');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–µ–º–∏–∏
        function updatePremiumInfo() {
            const premiumInfo = document.getElementById('premium-info');
            const premiumData = calculatePremiumCost();
            
            if (gameState.premiumActive) {
                premiumInfo.textContent = `–ê–∫—Ç–∏–≤–Ω–∞ (${Math.ceil(gameState.premiumDuration / (24 * 60))} –¥–Ω. –æ—Å—Ç–∞–ª–æ—Å—å)`;
            } else if (gameState.premiumCooldown > 0) {
                premiumInfo.textContent = `–î–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ ${gameState.premiumCooldown} –¥–Ω.`;
            } else if (premiumData.availableSurplus > 0) {
                premiumInfo.textContent = `–î–æ—Å—Ç—É–ø–Ω–∞`;
            } else {
                premiumInfo.textContent = `–ù—É–∂–Ω–æ +${Math.round(-premiumData.availableSurplus)} BYN`;
            }
        }

        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function showRatingModal() {
            const modal = document.getElementById('rating-modal');
            const tbody = modal.querySelector('tbody');
            
            tbody.innerHTML = '';
            CONFIG.ratingRanges.forEach(range => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${range.rating}</td>
                    <td>${range.min.toLocaleString()}</td>
                    <td>${range.max.toLocaleString()}</td>
                `;
                tbody.appendChild(row);
            });
            
            modal.style.display = 'block';
        }

        function showBynModal() {
            const modal = document.getElementById('byn-modal');
            const incomeList = document.getElementById('income-list');
            const expenseList = document.getElementById('expense-list');
            
            // –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
            let dailyIncome = 0;
            gameState.activeOrders.forEach(order => {
                dailyIncome += order.value / order.deadline;
            });
            
            let monthlyExpenses = 0;
            monthlyExpenses += gameState.employees * CONFIG.employeeSalary;
            if (gameState.hasAccountant) {
                monthlyExpenses += CONFIG.accountantSalary;
            }
            gameState.advertising.forEach(ad => {
                monthlyExpenses += ad.cost * 30;
            });
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
            incomeList.innerHTML = `
                <div>–î–æ—Ö–æ–¥—ã –æ—Ç –∑–∞–∫–∞–∑–æ–≤: ${Math.round(dailyIncome)} BYN/–¥–µ–Ω—å</div>
            `;
            expenseList.innerHTML = `
                <div>–ó–∞—Ä–ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: ${gameState.employees * CONFIG.employeeSalary} BYN/–º–µ—Å</div>
                ${gameState.hasAccountant ? `<div>–ó–∞—Ä–ø–ª–∞—Ç–∞ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞: ${CONFIG.accountantSalary} BYN/–º–µ—Å</div>` : ''}
                <div>–†–µ–∫–ª–∞–º–∞: ${gameState.advertising.reduce((sum, ad) => sum + ad.cost * 30, 0)} BYN/–º–µ—Å</div>
                <div><strong>–í—Å–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤: ${monthlyExpenses} BYN/–º–µ—Å</strong></div>
            `;
            
            modal.style.display = 'block';
        }

        function showDriveModal() {
            const modal = document.getElementById('drive-modal');
            const tbody = document.getElementById('drive-sources');
            
            tbody.innerHTML = `
                <tr>
                    <td>–ò–≥—Ä–æ–∫</td>
                    <td>80</td>
                </tr>
                <tr>
                    <td>–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (${gameState.employees})</td>
                    <td>${gameState.employees * CONFIG.employeeDrive}</td>
                </tr>
                ${gameState.zealActive ? `
                <tr>
                    <td>–ë–æ–Ω—É—Å ZEAL</td>
                    <td>+${gameState.level * 2}</td>
                </tr>
                ` : ''}
            `;
            
            modal.style.display = 'block';
        }

        function showEmployeesModal() {
            const modal = document.getElementById('employees-modal');
            const container = document.getElementById('departments-list');
            
            container.innerHTML = '';
            
            const stages = ['order', 'layout', 'prepress', 'press', 'postpress', 'product', 'shipment'];
            const stageNames = {
                order: '–ó–∞–∫–∞–∑',
                layout: '–ú–∞–∫–µ—Ç', 
                prepress: '–î–æ–ø–µ—á–∞—Ç–∫–∞',
                press: '–ü–µ—á–∞—Ç—å',
                postpress: '–ü–æ—Å–ª–µ–ø–µ—á–∞—Ç–∫–∞',
                product: '–ò–∑–¥–µ–ª–∏–µ',
                shipment: '–û—Ç–≥—Ä—É–∑–∫–∞'
            };
            
            stages.forEach(stage => {
                const orderCount = gameState.ordersInProgress[stage].length;
                const employeeCount = gameState.employeeAssignments.filter(e => e.stage === stage).length;
                
                const row = document.createElement('div');
                row.className = 'department-row';
                row.innerHTML = `
                    <div class="department-name">${stageNames[stage]}</div>
                    <div class="department-stats">${orderCount}</div>
                    <div class="department-stats">${employeeCount}</div>
                    <div class="department-controls">
                        <button class="employee-control-btn" onclick="moveEmployeeToStage('${stage}', 1)">+</button>
                        <button class="employee-control-btn" onclick="moveEmployeeFromStage('${stage}', 1)">-</button>
                    </div>
                `;
                
                container.appendChild(row);
            });
            
            modal.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
        window.moveEmployeeToStage = function(stage, count) {
            // –ù–∞—Ö–æ–¥–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ –≤ —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ
            const availableEmployee = gameState.employeeAssignments.find(e => e.stage !== stage);
            if (availableEmployee) {
                availableEmployee.stage = stage;
                showEmployeesModal();
            }
        };

        window.moveEmployeeFromStage = function(stage, count) {
            // –ù–∞—Ö–æ–¥–∏–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ —ç—Ç–æ–º –æ—Ç–¥–µ–ª–µ
            const employeeInStage = gameState.employeeAssignments.find(e => e.stage === stage);
            if (employeeInStage) {
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ –ø–µ—Ä–≤—ã–π –æ—Ç–¥–µ–ª
                employeeInStage.stage = 'order';
                showEmployeesModal();
            }
        };

        function showAdvertisingModal() {
            const modal = document.getElementById('advertising-modal');
            const container = document.getElementById('advertising-points');
            
            container.innerHTML = '';
            CONFIG.advertisingPoints.forEach(point => {
                const isActive = gameState.advertising.some(ad => ad.id === point.id);
                const item = document.createElement('div');
                item.className = `upgrade-item ${isActive ? 'disabled' : ''}`;
                item.innerHTML = `
                    <div><strong>–¢–æ—á–∫–∞ ${point.id}</strong></div>
                    <div>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${point.cost.toLocaleString()} BYN/–¥–µ–Ω—å</div>
                    <div>–ü–æ–∫–∞–∑–æ–≤: ${point.shows.toLocaleString()}/–¥–µ–Ω—å</div>
                    <div>CTR: ${point.ctr}%</div>
                    <div>–ë–æ–Ω—É—Å: ${point.bonus} BYN/–∫–ª–∏–∫</div>
                    ${!isActive ? 
                        `<button class="action-btn" onclick="activateAdvertising(${point.id})">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>` : 
                        `<button class="action-btn" onclick="deactivateAdvertising(${point.id})">–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>`
                    }
                `;
                
                container.appendChild(item);
            });
            
            modal.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ä–µ–∫–ª–∞–º—ã
        window.activateAdvertising = function(pointId) {
            const point = CONFIG.advertisingPoints.find(p => p.id === pointId);
            if (point && gameState.byn >= point.cost) {
                gameState.byn -= point.cost;
                gameState.advertising.push({...point});
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω—è
                addLevelProgress(50);
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                closeModals();
                setTimeout(() => showAdvertisingModal(), 100);
            }
        };

        window.deactivateAdvertising = function(pointId) {
            gameState.advertising = gameState.advertising.filter(ad => ad.id !== pointId);
            closeModals();
            setTimeout(() => showAdvertisingModal(), 100);
        };

        function showUpgradesModal() {
            const modal = document.getElementById('upgrades-modal');
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π —Å–∫–æ—Ä–æ—Å—Ç–∏
            const speedContainer = document.getElementById('speed-upgrades');
            speedContainer.innerHTML = '';
            
            CONFIG.speedUpgrades.forEach((upgrade, index) => {
                const canBuy = gameState.upgrades.speed === index && gameState.byn >= upgrade.cost;
                const item = document.createElement('div');
                item.className = `upgrade-item ${!canBuy ? 'disabled' : ''}`;
                item.innerHTML = `
                    <div><strong>–°–∫–æ—Ä–æ—Å—Ç—å —É—Ä–æ–≤–µ–Ω—å ${upgrade.level}</strong></div>
                    <div>–°–∫–æ—Ä–æ—Å—Ç—å: ${upgrade.speed} —Å–µ–∫</div>
                    <div>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${upgrade.cost.toLocaleString()} BYN</div>
                    ${canBuy ? 
                        `<button class="action-btn" onclick="buySpeedUpgrade(${index})">–ö—É–ø–∏—Ç—å</button>` : 
                        gameState.upgrades.speed > index ? 
                        '<div>–ö—É–ø–ª–µ–Ω–æ</div>' : 
                        '<div>–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</div>'
                    }
                `;
                
                speedContainer.appendChild(item);
            });
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
            const equipmentContainer = document.getElementById('equipment-upgrades');
            equipmentContainer.innerHTML = '';
            
            const stageNames = ['–ó–∞–∫–∞–∑', '–ú–∞–∫–µ—Ç', '–î–æ–ø–µ—á–∞—Ç–∫–∞', '–ü–µ—á–∞—Ç—å', '–ü–æ—Å–ª–µ–ø–µ—á–∞—Ç–∫–∞', '–ò–∑–¥–µ–ª–∏–µ', '–û—Ç–≥—Ä—É–∑–∫–∞'];
            
            gameState.upgrades.equipment.forEach((level, index) => {
                const nextCost = level < 5 ? CONFIG.equipmentUpgradeCost[level] : null;
                const canBuy = nextCost && gameState.byn >= nextCost;
                
                const item = document.createElement('div');
                item.className = `upgrade-item ${!canBuy ? 'disabled' : ''}`;
                item.innerHTML = `
                    <div><strong>${stageNames[index]} (–£—Ä. ${level}/5)</strong></div>
                    <div>–°–Ω–∏–∂–µ–Ω–∏–µ DRIVE: ${(level * 0.05).toFixed(2)}%</div>
                    <div>${nextCost ? `–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å: ${nextCost.toLocaleString()} BYN` : '–ú–∞–∫—Å. —É—Ä–æ–≤–µ–Ω—å'}</div>
                    ${canBuy ? 
                        `<button class="action-btn" onclick="buyEquipmentUpgrade(${index})">–£–ª—É—á—à–∏—Ç—å</button>` : 
                        level === 5 ? 
                        '<div>–ú–∞–∫—Å. —É—Ä–æ–≤–µ–Ω—å</div>' : 
                        '<div>–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</div>'
                    }
                `;
                
                equipmentContainer.appendChild(item);
            });
            
            modal.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
        window.buySpeedUpgrade = function(index) {
            const upgrade = CONFIG.speedUpgrades[index];
            if (gameState.byn >= upgrade.cost) {
                gameState.byn -= upgrade.cost;
                gameState.upgrades.speed = upgrade.level;
                closeModals();
                setTimeout(() => showUpgradesModal(), 100);
            }
        };

        window.buyEquipmentUpgrade = function(stageIndex) {
            const currentLevel = gameState.upgrades.equipment[stageIndex];
            if (currentLevel < 5) {
                const cost = CONFIG.equipmentUpgradeCost[currentLevel];
                if (gameState.byn >= cost) {
                    gameState.byn -= cost;
                    gameState.upgrades.equipment[stageIndex]++;
                    closeModals();
                    setTimeout(() => showUpgradesModal(), 100);
                }
            }
        };

        function showTeamModal() {
            const modal = document.getElementById('team-modal');
            const container = document.getElementById('team-events');
            
            container.innerHTML = '';
            CONFIG.teamEvents.forEach((event, index) => {
                const totalCost = event.baseCost + (gameState.employees * event.costPerEmployee) + 
                                 (gameState.hasAccountant ? event.costPerEmployee : 0);
                const canAfford = gameState.byn >= totalCost;
                
                const item = document.createElement('div');
                item.className = `upgrade-item ${!canAfford ? 'disabled' : ''}`;
                item.innerHTML = `
                    <div><strong>${event.name}</strong></div>
                    <div>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${totalCost.toLocaleString()} BYN</div>
                    <div>–†–µ–π—Ç–∏–Ω–≥: +${event.rating}</div>
                    <div>ZEAL: +${event.zeal}</div>
                    <div>REST: +${event.rest}</div>
                    <div>–£—Ä–æ–≤–µ–Ω—å: +${event.levelProgress}%</div>
                    ${canAfford ? 
                        `<button class="action-btn" onclick="conductTeamEvent(${index})">–ü—Ä–æ–≤–µ—Å—Ç–∏</button>` : 
                        '<div>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤</div>'
                    }
                `;
                
                container.appendChild(item);
            });
            
            modal.style.display = 'block';
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥–∞
        window.conductTeamEvent = function(eventIndex) {
            const event = CONFIG.teamEvents[eventIndex];
            const totalCost = event.baseCost + (gameState.employees * event.costPerEmployee) + 
                             (gameState.hasAccountant ? event.costPerEmployee : 0);
            
            if (gameState.byn >= totalCost) {
                gameState.byn -= totalCost;
                gameState.rating += event.rating;
                gameState.zeal += event.zeal;
                gameState.rest = Math.min(CONFIG.maxRest, gameState.rest + event.rest);
                addLevelProgress(event.levelProgress);
                
                closeModals();
            }
        };

        function showLevelModal() {
            const modal = document.getElementById('level-modal');
            const tbody = document.getElementById('level-table');
            
            tbody.innerHTML = '';
            CONFIG.levels.forEach(level => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${level.level}</td>
                    <td>${level.maxEmployees}</td>
                    <td>${level.ratingBonus}</td>
                `;
                tbody.appendChild(row);
            });
            
            modal.style.display = 'block';
        }

        function closeModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        function handleTabClick(event) {
            const tab = event.currentTarget;
            const tabName = tab.dataset.tab;
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            tab.parentElement.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            tab.parentElement.parentElement.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É
            tab.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', initGame);
    </script>
</body>
</html>
