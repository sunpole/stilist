<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–∏–π –ú–∞–≥–Ω–∞—Ç</title>
    <style>
        /* === –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò === */
        :root {
            --color-primary: #2c3e50;
            --color-secondary: #34495e;
            --color-accent: #e67e22;
            --color-success: #27ae60;
            --color-warning: #f39c12;
            --color-danger: #e74c3c;
            --color-text: #2c3e50;
            --color-light: #ecf0f1;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--color-text);
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        /* === –®–ê–ü–ö–ê –ò –°–¢–ê–¢–£–°-–ë–ê–† === */
        .game-header {
            background: var(--color-primary);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .status-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            padding: 15px;
            background: var(--color-secondary);
            color: white;
        }

        .resource {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        /* === –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø === */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            padding: 20px;
            background: var(--color-light);
        }

        .game-btn {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .game-btn:hover {
            background: #d35400;
            transform: translateY(-2px);
        }

        .game-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        /* === –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–ô –¶–ï–• === */
        .production-line {
            padding: 20px;
        }

        .production-stage {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .production-stage.active {
            border-color: var(--color-accent);
            background: #fff3e0;
        }

        .stage-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .employee-slot {
            width: 40px;
            height: 40px;
            border: 2px dashed #bdc3c7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .employee-slot.filled {
            border-color: var(--color-success);
            background: #d5f4e6;
        }

        /* === –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê === */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text);
        }

        /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
        @media (max-width: 768px) {
            .status-bar {
                grid-template-columns: 1fr;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .production-stage {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }

        /* === –ê–ù–ò–ú–ê–¶–ò–ò === */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-success);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- –®–ê–ü–ö–ê –ò–ì–†–´ -->
        <header class="game-header">
            <h1>üè¢ –¢–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–∏–π –ú–∞–≥–Ω–∞—Ç</h1>
            <p>–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∫ –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –∏–º–ø–µ—Ä–∏–∏!</p>
        </header>

        <!-- –°–¢–ê–¢–£–°-–ë–ê–† -->
        <div class="status-bar">
            <div class="resource">
                <span>üí∞ BYN:</span>
                <span id="money">2,000</span>
            </div>
            <div class="resource">
                <span>‚≠ê RATING:</span>
                <span id="rating">1</span>
            </div>
            <div class="resource">
                <span>üèÉ DRIVE:</span>
                <span id="drive">80/80</span>
            </div>
            <div class="resource">
                <span>üî• ZEAL:</span>
                <span id="zeal">0</span>
            </div>
            <div class="resource">
                <span>üí§ REST:</span>
                <span id="rest">100</span>
            </div>
            <div class="resource">
                <span>üë• –°–û–¢–†–£–î–ù–ò–ö–ò:</span>
                <span id="employees">0/1</span>
            </div>
        </div>

        <!-- –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
        <div class="control-panel">
            <button class="game-btn" onclick="game.nextDay()">üìÖ –°–õ–ï–î–£–Æ–©–ò–ô –î–ï–ù–¨</button>
            <button class="game-btn" onclick="game.toggleAutoDay()">‚ö° –ê–í–¢–û-–î–ï–ù–¨: –í–´–ö–õ</button>
            <button class="game-btn" onclick="game.activateZeal()">üöÄ –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ ZEAL</button>
            <button class="game-btn" onclick="game.corporateEvent()">üéâ –ö–û–†–ü–û–†–ê–¢–ò–í</button>
            <button class="game-btn" onclick="game.showScreen('employees')">üë• –ü–ï–†–°–û–ù–ê–õ</button>
            <button class="game-btn" onclick="game.showScreen('upgrades')">üõ†Ô∏è –£–õ–£–ß–®–ï–ù–ò–Ø</button>
            <button class="game-btn" onclick="game.showScreen('advertising')">üì¢ –†–ï–ö–õ–ê–ú–ê</button>
            <button class="game-btn" onclick="game.showScreen('orders')">üì¶ –ó–ê–ö–ê–ó–´</button>
        </div>

        <!-- –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–ô –¶–ï–• -->
        <section class="production-line">
            <h2>üè≠ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–µ—Ö</h2>
            <div id="production-stages">
                <!-- –≠—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã JavaScript -->
            </div>
        </section>

        <!-- –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –¢–ï–ö–£–©–ï–ú –ó–ê–ö–ê–ó–ï -->
        <section style="padding: 20px; background: #f8f9fa; margin: 20px; border-radius: 10px;">
            <h3>üìä –¢–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑</h3>
            <div id="current-order">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
            <div class="progress-bar">
                <div id="order-progress" class="progress-fill" style="width: 0%"></div>
            </div>
        </section>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–ï–†–°–û–ù–ê–õ–ê -->
    <div id="employees-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º</h2>
                <button class="close-btn" onclick="game.hideModal('employees-modal')">√ó</button>
            </div>
            <div id="employees-list">
                <!-- –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JavaScript -->
            </div>
            <button class="game-btn" onclick="game.hireEmployee()" style="margin-top: 15px; width: 100%;">
                üë∑ –ù–∞–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (1,500 BYN/–º–µ—Å)
            </button>
            <button class="game-btn" onclick="game.hireAccountant()" style="margin-top: 10px; width: 100%; background: #9b59b6;">
                üßÆ –ù–∞–Ω—è—Ç—å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞ (2,000 BYN/–º–µ—Å)
            </button>
        </div>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –£–õ–£–ß–®–ï–ù–ò–ô -->
    <div id="upgrades-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</h2>
                <button class="close-btn" onclick="game.hideModal('upgrades-modal')">√ó</button>
            </div>
            <div id="upgrades-list">
                <!-- –°–ø–∏—Å–æ–∫ —É–ª—É—á—à–µ–Ω–∏–π –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // === –û–°–ù–û–í–ù–û–ô –û–ë–™–ï–ö–¢ –ò–ì–†–´ ===
        const game = {
            // –ò–ì–†–û–í–´–ï –î–ê–ù–ù–´–ï
            state: {
                money: 2000,
                rating: 1,
                drive: 80,
                maxDrive: 80,
                zeal: 0,
                rest: 100,
                currentDay: 1,
                startDate: new Date('2025-09-01'),
                employees: [],
                accountant: null,
                currentOrder: null,
                orderProgress: 0,
                orderDaysLeft: 0,
                upgrades: {
                    printEfficiency: 1,
                    driveEfficiency: 0.25
                },
                autoDay: false,
                autoDayInterval: null
            },

            // –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–ï –≠–¢–ê–ü–´
            productionStages: [
                'ORDER', 'LAYOUT', 'PREPRESS', 'PRESS', 'POST_PRESS', 'PRODUCT', 'SHIPMENT'
            ],

            // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
            init() {
                console.log('üéÆ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¢–∏–ø–æ–≥—Ä–∞—Ñ—Å–∫–æ–≥–æ –ú–∞–≥–Ω–∞—Ç–∞...');
                this.loadGame();
                this.createProductionStages();
                this.updateUI();
                this.generateNewOrder();
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ-–¥–µ–Ω—å, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –≤–∫–ª—é—á–µ–Ω
                if (this.state.autoDay) {
                    this.toggleAutoDay();
                }
                
                console.log('‚úÖ –ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞!');
            },

            // –°–û–ó–î–ê–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–û–ô –õ–ò–ù–ò–ò
            createProductionStages() {
                const container = document.getElementById('production-stages');
                container.innerHTML = '';

                this.productionStages.forEach((stage, index) => {
                    const stageElement = document.createElement('div');
                    stageElement.className = 'production-stage';
                    stageElement.innerHTML = `
                        <div class="stage-info">
                            <strong>${stage}</strong>
                            <div class="employee-slot" data-stage="${index}" onclick="game.assignEmployee(${index})">
                                ${this.getStageEmployee(index) ? 'üë§' : '+'}
                            </div>
                        </div>
                        <button class="game-btn" onclick="game.processStage(${index})" ${this.state.drive < 1 ? 'disabled' : ''}>
                            –í—ã–ø–æ–ª–Ω–∏—Ç—å (1 DRIVE)
                        </button>
                    `;
                    container.appendChild(stageElement);
                });
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –°–û–¢–†–£–î–ù–ò–ö–ê –î–õ–Ø –≠–¢–ê–ü–ê
            getStageEmployee(stageIndex) {
                return this.state.employees[stageIndex] || null;
            },

            // –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –°–û–¢–†–£–î–ù–ò–ö–ê –ù–ê –≠–¢–ê–ü
            assignEmployee(stageIndex) {
                if (this.state.employees.length <= stageIndex) {
                    this.showModal('employees-modal');
                    return;
                }

                // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                this.updateProductionStages();
            },

            // –û–ë–†–ê–ë–û–¢–ö–ê –≠–¢–ê–ü–ê –í–†–£–ß–ù–£–Æ
            processStage(stageIndex) {
                if (this.state.drive < 1) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ DRIVE! –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è.');
                    return;
                }

                this.state.drive -= 1;
                this.updateUI();
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
                const stages = document.querySelectorAll('.production-stage');
                stages[stageIndex].classList.add('pulse');
                setTimeout(() => stages[stageIndex].classList.remove('pulse'), 500);

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
                this.checkOrderCompletion();
            },

            // –°–õ–ï–î–£–Æ–©–ò–ô –î–ï–ù–¨
            nextDay() {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
                this.autoProcessStages();
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ DRIVE
                this.state.drive = this.state.maxDrive;
                
                // –í—ã–ø–ª–∞—Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç
                this.paySalaries();
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
                this.updateOrderProgress();
                
                this.state.currentDay++;
                this.updateUI();
                
                console.log(`üìÖ –ù–∞—Å—Ç—É–ø–∏–ª –¥–µ–Ω—å ${this.state.currentDay}`);
            },

            // –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –≠–¢–ê–ü–û–í –°–û–¢–†–£–î–ù–ò–ö–ê–ú–ò
            autoProcessStages() {
                this.state.employees.forEach((employee, index) => {
                    if (index < this.productionStages.length) {
                        // –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–π —ç—Ç–∞–ø
                        this.checkOrderCompletion();
                    }
                });
            },

            // –í–´–ü–õ–ê–¢–ê –ó–ê–†–ü–õ–ê–¢
            paySalaries() {
                const totalSalary = this.state.employees.length * 1500 + (this.state.accountant ? 2000 : 0);
                this.state.money -= totalSalary;
                
                if (this.state.money < 0) {
                    this.gameOver();
                }
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–û–ì–†–ï–°–°–ê –ó–ê–ö–ê–ó–ê
            updateOrderProgress() {
                if (!this.state.currentOrder) return;

                this.state.orderDaysLeft--;
                
                if (this.state.orderDaysLeft <= 0) {
                    this.completeOrder();
                } else {
                    const progress = ((this.state.currentOrder.duration - this.state.orderDaysLeft) / this.state.currentOrder.duration) * 100;
                    this.state.orderProgress = progress;
                    this.updateOrderUI();
                }
            },

            // –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ò–Ø –ó–ê–ö–ê–ó–ê
            checkOrderCompletion() {
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
                if (this.state.orderProgress >= 100) {
                    this.completeOrder();
                }
            },

            // –ó–ê–í–ï–†–®–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê
            completeOrder() {
                if (!this.state.currentOrder) return;

                const reward = this.state.currentOrder.reward;
                this.state.money += reward;
                this.state.rating += this.calculateRatingReward();
                
                alert(`‚úÖ –ó–∞–∫–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω! –ü–æ–ª—É—á–µ–Ω–æ: ${reward} BYN`);
                this.generateNewOrder();
            },

            // –†–ê–°–ß–ï–¢ –ù–ê–ì–†–ê–î–´ –ó–ê –†–ï–ô–¢–ò–ù–ì
            calculateRatingReward() {
                const baseRating = 1;
                const bonus = this.state.currentOrder.reward > 1000 ? 1 : 0;
                const restMultiplier = this.state.rest / 10;
                return (baseRating + bonus) * restMultiplier;
            },

            // –ì–ï–ù–ï–†–ê–¶–ò–Ø –ù–û–í–û–ì–û –ó–ê–ö–ê–ó–ê
            generateNewOrder() {
                const minOrder = this.getMinOrderAmount();
                const maxOrder = this.getMaxOrderAmount();
                const reward = Math.floor(Math.random() * (maxOrder - minOrder + 1)) + minOrder;
                const duration = Math.max(1, Math.ceil(this.productionStages.length / Math.max(1, this.state.employees.length)));

                this.state.currentOrder = {
                    reward: reward,
                    duration: duration
                };
                this.state.orderDaysLeft = duration;
                this.state.orderProgress = 0;
                
                this.updateOrderUI();
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ô –°–£–ú–ú–´ –ó–ê–ö–ê–ó–ê
            getMinOrderAmount() {
                if (this.state.rating >= 5000) return 5000;
                if (this.state.rating >= 4000) return 2000;
                if (this.state.rating >= 3500) return 1500;
                if (this.state.rating >= 3000) return 1000;
                if (this.state.rating >= 2500) return 750;
                if (this.state.rating >= 2000) return 500;
                if (this.state.rating >= 1750) return 300;
                if (this.state.rating >= 1500) return 250;
                if (this.state.rating >= 1250) return 200;
                if (this.state.rating >= 1000) return 150;
                if (this.state.rating >= 500) return 125;
                if (this.state.rating >= 250) return 100;
                if (this.state.rating >= 100) return 75;
                return 50;
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ô –°–£–ú–ú–´ –ó–ê–ö–ê–ó–ê
            getMaxOrderAmount() {
                if (this.state.rating >= 5000) return 250000;
                if (this.state.rating >= 4000) return 60000;
                if (this.state.rating >= 3500) return 37500;
                if (this.state.rating >= 3000) return 20000;
                if (this.state.rating >= 2500) return 15000;
                if (this.state.rating >= 2000) return 10000;
                if (this.state.rating >= 1750) return 6000;
                if (this.state.rating >= 1500) return 5000;
                if (this.state.rating >= 1250) return 4000;
                if (this.state.rating >= 1000) return 3000;
                if (this.state.rating >= 500) return 2500;
                if (this.state.rating >= 250) return 2000;
                if (this.state.rating >= 100) return 1500;
                return 1000;
            },

            // –ù–ê–ô–ú –°–û–¢–†–£–î–ù–ò–ö–ê
            hireEmployee() {
                if (this.state.money < 1500) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –Ω–∞–π–º–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞!');
                    return;
                }

                this.state.employees.push({
                    type: 'basic',
                    salary: 1500,
                    position: this.state.employees.length
                });

                this.state.money -= 1500;
                this.updateUI();
                this.createProductionStages();
                alert('üë∑ –ù–æ–≤—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–∞–Ω—è—Ç!');
            },

            // –ù–ê–ô–ú –ë–£–•–ì–ê–õ–¢–ï–†–ê
            hireAccountant() {
                if (this.state.accountant) {
                    alert('–ë—É—Ö–≥–∞–ª—Ç–µ—Ä —É–∂–µ –Ω–∞–Ω—è—Ç!');
                    return;
                }

                if (this.state.money < 2000) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –Ω–∞–π–º–∞ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞!');
                    return;
                }

                this.state.accountant = {
                    type: 'accountant',
                    salary: 2000
                };

                this.state.money -= 2000;
                this.updateUI();
                alert('üßÆ –ë—É—Ö–≥–∞–ª—Ç–µ—Ä –Ω–∞–Ω—è—Ç! –¢–µ–ø–µ—Ä—å –≤—ã –≤–∏–¥–∏—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.');
            },

            // –ê–ö–¢–ò–í–ê–¶–ò–Ø ZEAL
            activateZeal() {
                if (this.state.zeal < 1) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ZEAL! –û–±–º–µ–Ω—è–π—Ç–µ REST —É –°–Ω–æ–≤–∏–¥—Ü–∞.');
                    return;
                }

                this.state.zeal--;
                const bonus = this.getPlayerLevel() * 2;
                this.state.drive += bonus;
                this.updateUI();
                alert(`üöÄ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω ZEAL! –ü–æ–ª—É—á–µ–Ω–æ +${bonus} DRIVE`);
            },

            // –ö–û–†–ü–û–†–ê–¢–ò–í
            corporateEvent() {
                const cost = 1000;
                if (this.state.money < cost) {
                    alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤! –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤ —Å—Ç–æ–∏—Ç ${cost} BYN.`);
                    return;
                }

                this.state.money -= cost;
                this.state.rest = Math.min(100, this.state.rest + 30);
                this.updateUI();
                alert('üéâ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ! REST –∫–æ–º–∞–Ω–¥—ã +30');
            },

            // –ê–í–¢–û-–†–ï–ñ–ò–ú
            toggleAutoDay() {
                this.state.autoDay = !this.state.autoDay;
                
                if (this.state.autoDay) {
                    this.state.autoDayInterval = setInterval(() => {
                        this.nextDay();
                    }, 10000); // 10 —Å–µ–∫—É–Ω–¥
                    document.querySelector('[onclick="game.toggleAutoDay()"]').textContent = '‚ö° –ê–í–¢–û-–î–ï–ù–¨: –í–ö–õ';
                } else {
                    clearInterval(this.state.autoDayInterval);
                    document.querySelector('[onclick="game.toggleAutoDay()"]').textContent = '‚ö° –ê–í–¢–û-–î–ï–ù–¨: –í–´–ö–õ';
                }
            },

            // –ü–û–ö–ê–ó –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
            showModal(modalId) {
                document.getElementById(modalId).style.display = 'flex';
            },

            // –°–ö–†–´–¢–ò–ï –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê
            hideModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            },

            // –ü–û–ö–ê–ó –≠–ö–†–ê–ù–ê
            showScreen(screen) {
                const screens = ['employees', 'upgrades', 'advertising', 'orders'];
                screens.forEach(s => {
                    if (s === screen) {
                        this.showModal(s + '-modal');
                    }
                });
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê
            updateUI() {
                document.getElementById('money').textContent = this.state.money.toLocaleString();
                document.getElementById('rating').textContent = Math.floor(this.state.rating);
                document.getElementById('drive').textContent = `${this.state.drive}/${this.state.maxDrive}`;
                document.getElementById('zeal').textContent = this.state.zeal;
                document.getElementById('rest').textContent = this.state.rest;
                document.getElementById('employees').textContent = `${this.state.employees.length}/${this.getMaxEmployees()}`;
                
                this.updateProductionStages();
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê –ó–ê–ö–ê–ó–ê
            updateOrderUI() {
                const orderElement = document.getElementById('current-order');
                const progressElement = document.getElementById('order-progress');
                
                if (this.state.currentOrder) {
                    orderElement.innerHTML = `
                        –î–æ—Ö–æ–¥: ${this.state.currentOrder.reward.toLocaleString()} BYN | 
                        –û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: ${this.state.orderDaysLeft}
                    `;
                    progressElement.style.width = `${this.state.orderProgress}%`;
                } else {
                    orderElement.textContent = '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤';
                    progressElement.style.width = '0%';
                }
            },

            // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–û–ò–ó–í–û–î–°–¢–í–ï–ù–ù–´–• –≠–¢–ê–ü–û–í
            updateProductionStages() {
                const stages = document.querySelectorAll('.production-stage');
                stages.forEach((stage, index) => {
                    const employeeSlot = stage.querySelector('.employee-slot');
                    const hasEmployee = this.state.employees.length > index;
                    
                    employeeSlot.innerHTML = hasEmployee ? 'üë§' : '+';
                    employeeSlot.className = `employee-slot ${hasEmployee ? 'filled' : ''}`;
                    
                    const button = stage.querySelector('button');
                    button.disabled = this.state.drive < 1;
                });
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ì–û –ö–û–õ–ò–ß–ï–°–¢–í–ê –°–û–¢–†–£–î–ù–ò–ö–û–í
            getMaxEmployees() {
                const level = this.getPlayerLevel();
                if (level >= 80) return 400;
                if (level >= 75) return 300;
                if (level >= 60) return 180;
                if (level >= 55) return 110;
                if (level >= 50) return 100;
                if (level >= 40) return 80;
                if (level >= 30) return 30;
                if (level >= 20) return 20;
                if (level >= 15) return 15;
                if (level >= 10) return 10;
                return 1;
            },

            // –ü–û–õ–£–ß–ï–ù–ò–ï –£–†–û–í–ù–Ø –ò–ì–†–û–ö–ê
            getPlayerLevel() {
                return Math.floor(this.state.rating / 100) + 1;
            },

            // –ö–û–ù–ï–¶ –ò–ì–†–´
            gameOver() {
                alert('üíÄ –ë–ê–ù–ö–†–û–¢–°–¢–í–û! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.');
                this.resetGame();
            },

            // –°–ë–†–û–° –ò–ì–†–´
            resetGame() {
                this.state = {
                    money: 2000,
                    rating: 1,
                    drive: 80,
                    maxDrive: 80,
                    zeal: 0,
                    rest: 100,
                    currentDay: 1,
                    startDate: new Date('2025-09-01'),
                    employees: [],
                    accountant: null,
                    currentOrder: null,
                    orderProgress: 0,
                    orderDaysLeft: 0,
                    upgrades: {
                        printEfficiency: 1,
                        driveEfficiency: 0.25
                    },
                    autoDay: false
                };
                this.init();
            },

            // –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ì–†–´
            saveGame() {
                localStorage.setItem('typographyMagnateSave', JSON.stringify(this.state));
            },

            // –ó–ê–ì–†–£–ó–ö–ê –ò–ì–†–´
            loadGame() {
                const saved = localStorage.getItem('typographyMagnateSave');
                if (saved) {
                    this.state = JSON.parse(saved);
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—ä–µ–∫—Ç Date
                    this.state.startDate = new Date(this.state.startDate);
                }
            }
        };

        // –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï –ü–†–ò –ó–ê–ö–†–´–¢–ò–ò –°–¢–†–ê–ù–ò–¶–´
        window.addEventListener('beforeunload', () => {
            game.saveGame();
        });

        // –ó–ê–ü–£–°–ö –ò–ì–†–´ –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
        window.addEventListener('load', () => {
            game.init();
        });
    </script>
</body>
</html>
