<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¶–µ—Ä–∫–æ–≤–Ω—ã–π –°–∏–º—É–ª—è—Ç–æ—Ä 2025</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1a2a6c 0%, #2a4b8c 100%);
            color: #f8f8f8;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border-bottom: 3px solid #d4af37;
        }
        h1 {
            color: #d4af37;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
            margin-bottom: 10px;
        }
        .panel {
            background: rgba(30, 30, 60, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            border: 2px solid #5d8aa8;
        }
        .stats-panel {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .main-content {
            grid-column: 1;
        }
        .side-panel {
            grid-column: 2;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #d4af37;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px 8px 0 0;
        }
        .tab-btn {
            padding: 12px 20px;
            background: none;
            border: none;
            color: #e0e0e0;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            flex: 1;
        }
        .tab-btn:hover {
            background: rgba(212, 175, 55, 0.2);
        }
        .tab-btn.active {
            background: #d4af37;
            color: #1a2a6c;
            border-radius: 5px 5px 0 0;
        }
        .tab-content {
            display: none;
            padding: 15px;
            background: rgba(40, 40, 80, 0.8);
            border-radius: 0 0 10px 10px;
            min-height: 400px;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        .progress-bar {
            height: 25px;
            background-color: #3a3a6a;
            border-radius: 12px;
            margin: 12px 0;
            overflow: hidden;
            border: 1px solid #5d8aa8;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4af37 0%, #ffd700 100%);
            border-radius: 12px;
            transition: width 0.5s;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        button {
            background: linear-gradient(to right, #2a4b8c, #3a5ba8);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            margin: 6px;
            transition: all 0.3s;
            font-weight: bold;
            border: 1px solid #5d8aa8;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(93, 138, 168, 0.4);
        }
        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .resource, .activity, .leader, .upgrade {
            padding: 15px;
            background: rgba(50, 50, 90, 0.8);
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #d4af37;
            transition: all 0.3s;
        }
        .resource:hover, .activity:hover, .leader:hover, .upgrade:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .resource {
            text-align: center;
            padding: 12px;
        }
        .activity-grid, .leaders-grid, .upgrades-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        .requirements {
            font-size: 0.9em;
            color: #aaa;
            margin: 10px 0;
            padding: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: rgba(30, 30, 60, 0.95);
            border-left: 4px solid #d4af37;
            border-radius: 8px;
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1000;
            max-width: 350px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }
        .notification.show {
            transform: translateX(0);
        }
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: rgba(40, 40, 80, 0.6);
            border-radius: 5px;
        }
        .cost {
            color: #d4af37;
            font-weight: bold;
        }
        .income {
            color: #5d8aa8;
            font-weight: bold;
        }
        .level-badge {
            background: #d4af37;
            color: #1a2a6c;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-left: 5px;
        }
        h2 {
            color: #d4af37;
            margin-bottom: 15px;
            border-bottom: 2px solid #5d8aa8;
            padding-bottom: 8px;
        }
        h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }
        .rps-game {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }
        .rps-btn {
            font-size: 2em;
            padding: 15px;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .game-result {
            text-align: center;
            margin: 15px 0;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 30px;
        }
        .automation-control {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .automation-control label {
            margin-left: 10px;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .highlight {
            animation: highlight 1s;
        }
        @keyframes highlight {
            0% { background-color: initial; }
            50% { background-color: rgba(212, 175, 55, 0.3); }
            100% { background-color: initial; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–¶–µ—Ä–∫–æ–≤–Ω—ã–π –°–∏–º—É–ª—è—Ç–æ—Ä 2025</h1>
            <p>–†–∞–∑–≤–∏–≤–∞–π—Ç–µ –ª–∏–¥–µ—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ü–≤–µ—Ç–∞—é—â—É—é —Ü–µ—Ä–∫–æ–≤–Ω—É—é –æ–±—â–∏–Ω—É!</p>
        </header>
        
        <div class="panel stats-panel">
            <div class="stat-row">
                <span>–ü—Ä–∏—Ö–æ–∂–∞–Ω–µ:</span>
                <span id="followers">10</span>
            </div>
            <div class="stat-row">
                <span>–í–µ—Ä–∞:</span>
                <span id="faith">50</span>
            </div>
            <div class="stat-row">
                <span>–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è:</span>
                <span id="donations">100</span>
            </div>
            <div class="stat-row">
                <span>–õ–∏–¥–µ—Ä—ã:</span>
                <span id="leaders-count">0</span>
            </div>
            <div class="stat-row">
                <span>–£—Ä–æ–≤–µ–Ω—å —Ü–µ—Ä–∫–≤–∏:</span>
                <span id="church-level">1</span>
            </div>
        </div>
        
        <div class="panel main-content">
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('activities')">–î–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</button>
                <button class="tab-btn" onclick="switchTab('leaders')">–õ–∏–¥–µ—Ä—ã</button>
                <button class="tab-btn" onclick="switchTab('upgrades')">–£–ª—É—á—à–µ–Ω–∏—è</button>
            </div>
            
            <div id="activities" class="tab-content active">
                <h2>–¶–µ—Ä–∫–æ–≤–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
                <p>–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –£–ª—É—á—à–∞–π—Ç–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!</p>
                <div class="activity-grid" id="activities-list">
                    <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
            
            <div id="leaders" class="tab-content">
                <h2>–†–∞–∑–≤–∏—Ç–∏–µ –ª–∏–¥–µ—Ä–æ–≤</h2>
                <p>–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–π—Ç–µ –ª–∏–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å!</p>
                <div class="leaders-grid" id="leaders-list">
                    <!-- –õ–∏–¥–µ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <h3>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ª–∏–¥–µ—Ä–∞</h3>
                <div class="resource">
                    <p>–°—ã–≥—Ä–∞–π—Ç–µ –≤ –ø—Ä–æ—Å—Ç—É—é –∏–≥—Ä—É, —á—Ç–æ–±—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ª–∏–¥–µ—Ä–∞:</p>
                    <div class="rps-game">
                        <button class="rps-btn" onclick="playGame('–∫–∞–º–µ–Ω—å')">‚úä</button>
                        <button class="rps-btn" onclick="playGame('–Ω–æ–∂–Ω–∏—Ü—ã')">‚úåÔ∏è</button>
                        <button class="rps-btn" onclick="playGame('–±—É–º–∞–≥–∞')">‚úã</button>
                    </div>
                    <div class="game-result" id="game-result"></div>
                    <p>–°—Ç–æ–∏–º–æ—Å—Ç—å: 50 –≤–µ—Ä—ã –∏ 20 –ø—Ä–∏—Ö–æ–∂–∞–Ω</p>
                    <button id="train-leader-btn" onclick="trainLeader()">–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ª–∏–¥–µ—Ä–∞</button>
                </div>
            </div>
            
            <div id="upgrades" class="tab-content">
                <h2>–£–ª—É—á—à–µ–Ω–∏—è —Ü–µ—Ä–∫–≤–∏</h2>
                <p>–£–ª—É—á—à–∞–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ª–∏–¥–µ—Ä–æ–≤!</p>
                <div class="upgrades-grid" id="upgrades-list">
                    <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
        </div>
        
        <div class="panel side-panel">
            <h2>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h2>
            <div id="automation-list">
                <!-- –≠–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div id="achievements">
                <div class="stat-row">
                    <span>–ü–µ—Ä–≤—ã–π –ª–∏–¥–µ—Ä</span>
                    <span>üîí</span>
                </div>
                <div class="stat-row">
                    <span>10 –ø—Ä–∏—Ö–æ–∂–∞–Ω</span>
                    <span>‚úÖ</span>
                </div>
                <div class="stat-row">
                    <span>100 –≤–µ—Ä—ã</span>
                    <span>üîí</span>
                </div>
            </div>
            
            <div class="action-buttons">
                <button onclick="saveGame()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="resetGame()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        let gameState = {
            resources: {
                followers: 10,
                faith: 50,
                donations: 100
            },
            activities: {
                prayer: { 
                    level: 1, 
                    unlocked: true, 
                    auto: false, 
                    yield: { faith: 1 }, 
                    cost: {}, 
                    time: 3000 
                },
                sermon: { 
                    level: 1, 
                    unlocked: true, 
                    auto: false, 
                    yield: { followers: 1 }, 
                    cost: {}, 
                    time: 5000 
                },
                charity: { 
                    level: 0, 
                    unlocked: false, 
                    auto: false, 
                    yield: { donations: 5, faith: 0.5 }, 
                    cost: { donations: 10 }, 
                    time: 8000 
                },
                teaching: { 
                    level: 0, 
                    unlocked: false, 
                    auto: false, 
                    yield: { faith: 2 }, 
                    cost: { faith: 5 }, 
                    time: 10000 
                }
            },
            leaders: {
                junior: { count: 0, capacity: 1, efficiency: 1 },
                senior: { count: 0, capacity: 2, efficiency: 1.5 },
                coordinator: { count: 0, capacity: 3, efficiency: 2 }
            },
            upgrades: {
                autoPrayer: { level: 0, cost: { donations: 50 }, effect: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–ª–∏—Ç–≤–∞" },
                autoSermon: { level: 0, cost: { donations: 100 }, effect: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–ø–æ–≤–µ–¥—å" },
                leaderEfficiency: { level: 0, cost: { faith: 30 }, effect: "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ª–∏–¥–µ—Ä–æ–≤ +20%" }
            },
            churchLevel: 1,
            lastUpdate: Date.now()
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –∏–∑ localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('churchSimulator2025');
            if (savedGame) {
                try {
                    gameState = JSON.parse(savedGame);
                    showNotification('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã:', e);
                    showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                }
            }
            updateUI();
            startGameLoop();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –≤ localStorage
        function saveGame() {
            gameState.lastUpdate = Date.now();
            localStorage.setItem('churchSimulator2025', JSON.stringify(gameState));
            showNotification('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!')) {
                localStorage.removeItem('churchSimulator2025');
                gameState = {
                    resources: {
                        followers: 10,
                        faith: 50,
                        donations: 100
                    },
                    activities: {
                        prayer: { 
                            level: 1, 
                            unlocked: true, 
                            auto: false, 
                            yield: { faith: 1 }, 
                            cost: {}, 
                            time: 3000 
                        },
                        sermon: { 
                            level: 1, 
                            unlocked: true, 
                            auto: false, 
                            yield: { followers: 1 }, 
                            cost: {}, 
                            time: 5000 
                        },
                        charity: { 
                            level: 0, 
                            unlocked: false, 
                            auto: false, 
                            yield: { donations: 5, faith: 0.5 }, 
                            cost: { donations: 10 }, 
                            time: 8000 
                        },
                        teaching: { 
                            level: 0, 
                            unlocked: false, 
                            auto: false, 
                            yield: { faith: 2 }, 
                            cost: { faith: 5 }, 
                            time: 10000 
                        }
                    },
                    leaders: {
                        junior: { count: 0, capacity: 1, efficiency: 1 },
                        senior: { count: 0, capacity: 2, efficiency: 1.5 },
                        coordinator: { count: 0, capacity: 3, efficiency: 2 }
                    },
                    upgrades: {
                        autoPrayer: { level: 0, cost: { donations: 50 }, effect: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–ª–∏—Ç–≤–∞" },
                        autoSermon: { level: 0, cost: { donations: 100 }, effect: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–ø–æ–≤–µ–¥—å" },
                        leaderEfficiency: { level: 0, cost: { faith: 30 }, effect: "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ª–∏–¥–µ—Ä–æ–≤ +20%" }
                    },
                    churchLevel: 1,
                    lastUpdate: Date.now()
                };
                updateUI();
                showNotification('–ù–æ–≤–∞—è –∏–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞!');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            updateResources();
            updateActivities();
            updateLeaders();
            updateUpgrades();
            updateAutomation();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
        function updateResources() {
            document.getElementById('followers').textContent = Math.floor(gameState.resources.followers);
            document.getElementById('faith').textContent = Math.floor(gameState.resources.faith);
            document.getElementById('donations').textContent = Math.floor(gameState.resources.donations);
            document.getElementById('leaders-count').textContent = Object.values(gameState.leaders).reduce((sum, leader) => sum + leader.count, 0);
            document.getElementById('church-level').textContent = gameState.churchLevel;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
        function updateActivities() {
            const activitiesContainer = document.getElementById('activities-list');
            activitiesContainer.innerHTML = '';
            
            const activitiesConfig = {
                prayer: { name: '–ú–æ–ª–∏—Ç–≤–∞', desc: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤–µ—Ä—É' },
                sermon: { name: '–ü—Ä–æ–ø–æ–≤–µ–¥—å', desc: '–ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –Ω–æ–≤—ã—Ö –ø—Ä–∏—Ö–æ–∂–∞–Ω' },
                charity: { name: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', desc: '–ü—Ä–∏–Ω–æ—Å–∏—Ç –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è –∏ –Ω–µ–º–Ω–æ–≥–æ –≤–µ—Ä—ã' },
                teaching: { name: '–û–±—É—á–µ–Ω–∏–µ', desc: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤–µ—Ä—É (—Ç—Ä–µ–±—É–µ—Ç –≤–µ—Ä—ã)' }
            };
            
            for (const [activityId, activity] of Object.entries(gameState.activities)) {
                if (!activity.unlocked) continue;
                
                const config = activitiesConfig[activityId];
                const activityEl = document.createElement('div');
                activityEl.className = 'activity';
                
                activityEl.innerHTML = `
                    <h3>${config.name} <span class="level-badge">–£—Ä. ${activity.level}</span></h3>
                    <p>${config.desc}</p>
                    <div class="automation-control">
                        <input type="checkbox" id="auto-${activityId}" ${activity.auto ? 'checked' : ''} 
                            onchange="toggleAutomation('${activityId}')">
                        <label for="auto-${activityId}">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å</label>
                    </div>
                    <button onclick="performActivity('${activityId}')">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
                `;
                
                activitiesContainer.appendChild(activityEl);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏–¥–µ—Ä–æ–≤
        function updateLeaders() {
            const leadersContainer = document.getElementById('leaders-list');
            leadersContainer.innerHTML = '';
            
            const leadersConfig = {
                junior: { name: '–ú–ª–∞–¥—à–∏–π –ª–∏–¥–µ—Ä', desc: '–ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å 1 –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å' },
                senior: { name: '–°—Ç–∞—Ä—à–∏–π –ª–∏–¥–µ—Ä', desc: '–ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å 2 –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏' },
                coordinator: { name: '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä', desc: '–ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å 3 –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏' }
            };
            
            for (const [leaderId, leader] of Object.entries(gameState.leaders)) {
                const config = leadersConfig[leaderId];
                const leaderEl = document.createElement('div');
                leaderEl.className = 'leader';
                
                leaderEl.innerHTML = `
                    <h3>${config.name} <span class="level-badge">${leader.count}</span></h3>
                    <p>${config.desc}</p>
                    <p>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${leader.efficiency}x</p>
                `;
                
                leadersContainer.appendChild(leaderEl);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ª–∏–¥–µ—Ä–∞
            const trainButton = document.getElementById('train-leader-btn');
            trainButton.disabled = !(gameState.resources.faith >= 50 && gameState.resources.followers >= 20);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π
        function updateUpgrades() {
            const upgradesContainer = document.getElementById('upgrades-list');
            upgradesContainer.innerHTML = '';
            
            for (const [upgradeId, upgrade] of Object.entries(gameState.upgrades)) {
                const upgradeEl = document.createElement('div');
                upgradeEl.className = 'upgrade';
                
                let canAfford = true;
                let costHTML = '';
                
                for (const [resource, amount] of Object.entries(upgrade.cost)) {
                    const actualCost = amount * (upgrade.level + 1);
                    costHTML += `<div>${resource}: ${actualCost}</div>`;
                    if (gameState.resources[resource] < actualCost) {
                        canAfford = false;
                    }
                }
                
                upgradeEl.innerHTML = `
                    <h3>${upgrade.effect} <span class="level-badge">–£—Ä. ${upgrade.level}</span></h3>
                    <div class="cost">
                        <strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong>${costHTML}
                    </div>
                    <button ${!canAfford ? 'disabled' : ''} onclick="buyUpgrade('${upgradeId}')">
                        –£–ª—É—á—à–∏—Ç—å
                    </button>
                `;
                
                upgradesContainer.appendChild(upgradeEl);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
        function updateAutomation() {
            const automationContainer = document.getElementById('automation-list');
            automationContainer.innerHTML = '';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
            for (const [activityId, activity] of Object.entries(gameState.activities)) {
                if (activity.auto) {
                    const autoEl = document.createElement('div');
                    autoEl.className = 'resource';
                    autoEl.innerHTML = `
                        <h3>${activityId === 'prayer' ? '–ú–æ–ª–∏—Ç–≤–∞' : 
                                activityId === 'sermon' ? '–ü—Ä–æ–ø–æ–≤–µ–¥—å' : 
                                activityId === 'charity' ? '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å' : '–û–±—É—á–µ–Ω–∏–µ'}</h3>
                        <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ ${activity.time/1000} —Å–µ–∫</p>
                    `;
                    automationContainer.appendChild(autoEl);
                }
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–∏–¥–µ—Ä–∞—Ö
            const totalCapacity = Object.values(gameState.leaders).reduce(
                (sum, leader) => sum + (leader.count * leader.capacity), 0
            );
            
            const usedCapacity = Object.values(gameState.activities).filter(a => a.auto).length;
            
            const capacityEl = document.createElement('div');
            capacityEl.className = 'resource';
            capacityEl.innerHTML = `
                <h3>–ú–æ—â–Ω–æ—Å—Ç—å –ª–∏–¥–µ—Ä–æ–≤</h3>
                <p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: ${usedCapacity} –∏–∑ ${totalCapacity}</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${(usedCapacity/totalCapacity)*100}%"></div>
                </div>
            `;
            automationContainer.appendChild(capacityEl);
        }

        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        function performActivity(activityId) {
            const activity = gameState.activities[activityId];
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
            for (const [resource, amount] of Object.entries(activity.cost)) {
                if (gameState.resources[resource] < amount) {
                    showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ${resource}!`);
                    return;
                }
            }
            
            // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
            for (const [resource, amount] of Object.entries(activity.cost)) {
                gameState.resources[resource] -= amount;
            }
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è
            const button = event.target;
            button.disabled = true;
            const originalText = button.textContent;
            button.textContent = '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...';
            
            setTimeout(() => {
                // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
                for (const [resource, amount] of Object.entries(activity.yield)) {
                    gameState.resources[resource] += amount * activity.level;
                }
                
                // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
                button.disabled = false;
                button.textContent = originalText;
                
                showNotification(`–î–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞!`);
                updateUI();
                saveGame();
            }, activity.time);
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
        function toggleAutomation(activityId) {
            const activity = gameState.activities[activityId];
            const checkbox = document.getElementById(`auto-${activityId}`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω–æ—Å—Ç–∏ –ª–∏–¥–µ—Ä–æ–≤
            const totalCapacity = Object.values(gameState.leaders).reduce(
                (sum, leader) => sum + (leader.count * leader.capacity), 0
            );
            
            const usedCapacity = Object.values(gameState.activities).filter(a => a.auto).length;
            
            if (checkbox.checked && usedCapacity >= totalCapacity) {
                checkbox.checked = false;
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏–¥–µ—Ä–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏!');
                return;
            }
            
            activity.auto = checkbox.checked;
            updateAutomation();
            saveGame();
        }

        // –ò–≥—Ä–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ª–∏–¥–µ—Ä–∞
        function playGame(choice) {
            const choices = ['–∫–∞–º–µ–Ω—å', '–Ω–æ–∂–Ω–∏—Ü—ã', '–±—É–º–∞–≥–∞'];
            const computerChoice = choices[Math.floor(Math.random() * 3)];
            let result = '';
            
            if (choice === computerChoice) {
                result = '–ù–∏—á—å—è! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
            } else if (
                (choice === '–∫–∞–º–µ–Ω—å' && computerChoice === '–Ω–æ–∂–Ω–∏—Ü—ã') ||
                (choice === '–Ω–æ–∂–Ω–∏—Ü—ã' && computerChoice === '–±—É–º–∞–≥–∞') ||
                (choice === '–±—É–º–∞–≥–∞' && computerChoice === '–∫–∞–º–µ–Ω—å')
            ) {
                result = '–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –õ–∏–¥–µ—Ä –ª—É—á—à–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω.';
            } else {
                result = '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏. –õ–∏–¥–µ—Ä –ø–æ—Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤.';
            }
            
            document.getElementById('game-result').textContent = `–í—ã: ${choice} vs –ö–æ–º–ø—å—é—Ç–µ—Ä: ${computerChoice}. ${result}`;
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ª–∏–¥–µ—Ä–∞
        function trainLeader() {
            if (gameState.resources.faith < 50 || gameState.resources.followers < 20) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ª–∏–¥–µ—Ä–∞!');
                return;
            }
            
            gameState.resources.faith -= 50;
            gameState.resources.followers -= 20;
            
            // –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –ª–∏–¥–µ—Ä–∞
            const rand = Math.random();
            let leaderType = 'junior';
            
            if (rand < 0.1) {
                leaderType = 'coordinator';
            } else if (rand < 0.3) {
                leaderType = 'senior';
            }
            
            gameState.leaders[leaderType].count++;
            
            showNotification(`–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –Ω–æ–≤—ã–π ${leaderType === 'junior' ? '–º–ª–∞–¥—à–∏–π' : leaderType === 'senior' ? '—Å—Ç–∞—Ä—à–∏–π' : '–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä'} –ª–∏–¥–µ—Ä!`);
            updateUI();
            saveGame();
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(upgradeId) {
            const upgrade = gameState.upgrades[upgradeId];
            const actualCost = {};
            
            for (const [resource, amount] of Object.entries(upgrade.cost)) {
                actualCost[resource] = amount * (upgrade.level + 1);
                if (gameState.resources[resource] < actualCost[resource]) {
                    showNotification(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ${resource}!`);
                    return;
                }
            }
            
            // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
            for (const [resource, amount] of Object.entries(actualCost)) {
                gameState.resources[resource] -= amount;
            }
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —É–ª—É—á—à–µ–Ω–∏–µ
            upgrade.level++;
            
            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π
            if (upgradeId === 'autoPrayer' && upgrade.level === 1) {
                gameState.activities.prayer.auto = true;
            } else if (upgradeId === 'autoSermon' && upgrade.level === 1) {
                gameState.activities.sermon.auto = true;
            } else if (upgradeId === 'leaderEfficiency') {
                for (const leader of Object.values(gameState.leaders)) {
                    leader.efficiency = 1 + (0.2 * upgrade.level);
                }
            }
            
            showNotification(`–£–ª—É—á—à–µ–Ω–∏–µ "${upgrade.effect}" –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–æ!`);
            updateUI();
            saveGame();
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function startGameLoop() {
            setInterval(() => {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ activities
                for (const [activityId, activity] of Object.entries(gameState.activities)) {
                    if (activity.auto) {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
                        let canExecute = true;
                        for (const [resource, amount] of Object.entries(activity.cost)) {
                            if (gameState.resources[resource] < amount) {
                                canExecute = false;
                                break;
                            }
                        }
                        
                        if (canExecute) {
                            // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
                            for (const [resource, amount] of Object.entries(activity.cost)) {
                                gameState.resources[resource] -= amount;
                            }
                            
                            // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É —Å —É—á–µ—Ç–æ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ª–∏–¥–µ—Ä–æ–≤
                            const leaderEfficiency = Object.values(gameState.leaders).reduce(
                                (max, leader) => Math.max(max, leader.efficiency), 1
                            );
                            
                            for (const [resource, amount] of Object.entries(activity.yield)) {
                                gameState.resources[resource] += amount * activity.level * leaderEfficiency;
                            }
                        }
                    }
                }
                
                // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ activities –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
                if (gameState.resources.faith >= 100 && !gameState.activities.charity.unlocked) {
                    gameState.activities.charity.unlocked = true;
                    gameState.activities.charity.level = 1;
                    showNotification('–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å!');
                }
                
                if (gameState.resources.faith >= 200 && !gameState.activities.teaching.unlocked) {
                    gameState.activities.teaching.unlocked = true;
                    gameState.activities.teaching.level = 1;
                    showNotification('–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –æ–±—É—á–µ–Ω–∏–µ!');
                }
                
                // –ü–æ–≤—ã—à–∞–µ–º —É—Ä–æ–≤–µ–Ω—å —Ü–µ—Ä–∫–≤–∏
                if (gameState.resources.followers >= 100 && gameState.churchLevel === 1) {
                    gameState.churchLevel = 2;
                    showNotification('–¶–µ—Ä–∫–æ–≤—å –¥–æ—Å—Ç–∏–≥–ª–∞ 2 —É—Ä–æ–≤–Ω—è!');
                }
                
                updateUI();
            }, 3000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            
            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
            document.querySelector(`.tab-btn[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            loadGame();
        };
    </script>
</body>
</html>
